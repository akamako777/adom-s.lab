<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÊòüËº™„ÅÆ„ÇÆ„É°„É´„Çπ - È≠îÊ≥ïÈô£ÊßãÁØâ„Ç∑„Çπ„ÉÜ„É† Final (v5.9 Fix)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Three.js Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Three.js Postprocessing -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

    <style>
        /* „Éï„Ç©„É≥„ÉàËøΩÂä† */
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=M+PLUS+Rounded+1c:wght@400;500;700&family=Noto+Serif+JP:wght@400;700&family=Noto+Sans+Mono:wght@400&family=Noto+Sans+Runic&family=Noto+Sans+Hebrew:wght@400;700&display=swap');

        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background-color: #eef2f6; 
            color: #374151;
            overflow: hidden; /* „Çπ„ÇØ„É≠„Éº„É´Èò≤Ê≠¢ */
            margin: 0;
            touch-action: none; /* „Çπ„Éû„Éõ„Åß„ÅÆ‰ΩôË®à„Å™„Ç∏„Çß„Çπ„ÉÅ„É£„ÉºÈò≤Ê≠¢ */
        }
        
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #9ca3af; border-radius: 2px; }
        ::-webkit-scrollbar-thumb:hover { background: #6b7280; }

        .glass-panel {
            background: rgba(255, 255, 255, 0.98);
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.08);
        }

        .control-group { 
            margin-bottom: 0.75rem;
            padding: 0.5rem;
            border-radius: 0.5rem;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
        }
        
        .label-text { 
            font-size: 0.7rem; 
            font-weight: 700;
            color: #4b5563;
            margin-bottom: 0.25rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            letter-spacing: 0.025em;
        }

        /* ÂÖ•ÂäõUI„ÅÆ„Éú„Çø„É≥Âåñ„ÉªÊòéÁ¢∫Âåñ */
        select, input[type="text"], input[type="password"] {
            width: 100%;
            background-color: white;
            border: 2px solid #d1d5db;
            color: #374151;
            font-size: 0.75rem;
            border-radius: 0.5rem;
            display: block;
            padding: 0.5rem;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            font-weight: 700;
            transition: all 0.2s;
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }
        select:focus, input:focus {
            border-color: #3b82f6;
            outline: 2px solid #bfdbfe;
            outline-offset: 2px;
        }
        select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%233b82f6' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.75rem center;
            background-repeat: no-repeat;
            background-size: 1rem 1rem;
        }

        .magic-btn { 
            transition: all 0.2s ease; position: relative; overflow: hidden; 
            border-width: 2px;
        }
        .magic-btn:hover { transform: translateY(-1px); box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 10; }
        .magic-btn.active { 
            transform: scale(1.05); 
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.3); 
            font-weight: 800;
            z-index: 20;
        }

        .bg-toggle-container {
            display: flex; gap: 0.5rem; background: #e2e8f0; padding: 0.35rem; border-radius: 0.6rem;
        }
        .bg-toggle-btn {
            flex: 1; padding: 0.3rem; text-align: center; font-size: 0.8rem; border-radius: 0.4rem;
            cursor: pointer; transition: all 0.2s; font-weight: 600; display: flex; align-items: center; justify-content: center; gap: 0.4rem; color: #64748b;
            background: transparent;
        }
        .bg-toggle-btn:hover { background: rgba(255,255,255,0.5); }
        .bg-toggle-btn.active[data-bg="black"] { background: #1f2937; color: #fff; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .bg-toggle-btn.active[data-bg="white"] { background: #fff; color: #1f2937; box-shadow: 0 2px 5px rgba(0,0,0,0.1); border: 1px solid #cbd5e1; }

        /* Toggle Switch Style */
        .switch-group {
            display: flex; justify-content: space-between; align-items: center; background-color: white; padding: 0.5rem; border-radius: 0.5rem; border: 1px solid #e5e7eb; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); margin-top: 0.25rem;
        }
        .toggle-checkbox { display: none; }
        .toggle-label {
            width: 36px; height: 20px; position: relative; display: inline-block; background-color: #cbd5e1; border-radius: 9999px; transition: all 0.3s; cursor: pointer;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.2);
        }
        .toggle-circle {
            position: absolute; top: 2px; left: 2px; width: 16px; height: 16px; background-color: white; border-radius: 50%; transition: all 0.3s;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2);
        }
        .toggle-checkbox:checked + .toggle-label { background-color: #3b82f6; }
        .toggle-checkbox:checked + .toggle-label .toggle-circle { transform: translateX(16px); }

        /* API Key Section */
        .api-section {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border: 2px solid #bfdbfe;
            border-radius: 0.75rem;
            padding: 0.75rem;
            margin-bottom: 0.75rem;
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.05);
        }
        .api-status {
            font-size: 0.7rem; font-weight: bold; margin-top: 0.5rem;
            display: flex; align-items: center; gap: 0.25rem; justify-content: space-between;
        }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: #94a3b8; }
        .status-dot.connected { background: #10b981; box-shadow: 0 0 8px #10b981; }
        .api-link {
            font-size: 0.65rem; text-decoration: none; color: #2563eb; cursor: pointer;
            background: rgba(255,255,255,0.5); padding: 2px 6px; rounded: 4px; border: 1px solid #93c5fd;
        }
        .api-link:hover { background: #fff; }

        /* AI Generator UI */
        .ai-panel {
            display: none; 
            border-top: 2px dashed #cbd5e1;
            padding-top: 1rem; margin-top: 1rem;
        }
        .ai-panel.visible { display: block; }
        
        .ai-input-wrapper {
            position: relative;
            margin-bottom: 0.5rem;
        }
        .ai-input-icon {
            position: absolute; left: 0.75rem; top: 50%; transform: translateY(-50%);
            color: #9333ea; pointer-events: none;
        }
        #aiPromptInput {
            padding-left: 2.2rem;
            border-color: #d8b4fe;
        }
        #aiPromptInput:focus {
            border-color: #9333ea;
            box-shadow: 0 0 0 2px rgba(147, 51, 234, 0.2);
        }

        .ai-btn {
            width: 100%;
            background: linear-gradient(to right, #9333ea, #4f46e5);
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
            padding-top: 0.75rem;
            padding-bottom: 0.75rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            letter-spacing: 0.025em;
            transition: all 0.2s;
            margin-top: 0.5rem;
            border: 1px solid #a855f7;
        }
        .ai-btn:hover { 
            background: linear-gradient(to right, #7e22ce, #4338ca);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3); 
            transform: translateY(-1px); 
        }
        .ai-btn.loading { opacity: 0.7; cursor: wait; }
        .ai-btn.loading svg { animation: spin 1s infinite linear; }

        .saved-list {
            max-height: 120px; overflow-y: auto; margin-top: 0.5rem;
            background: #fff; border: 1px solid #e2e8f0; border-radius: 0.5rem;
        }
        .saved-item {
            display: flex; justify-content: space-between; align-items: center;
            padding: 0.5rem 0.75rem; border-bottom: 1px solid #f1f5f9; cursor: pointer; font-size: 0.75rem; font-weight: 500;
        }
        .saved-item:hover { background: #f0f9ff; }
        .saved-item.active { background: #eff6ff; border-left: 4px solid #3b82f6; }
        .del-btn { color: #ef4444; padding: 2px 6px; border-radius: 4px; transition: bg 0.2s; }
        .del-btn:hover { background: #fee2e2; }

        .io-group { display: flex; gap: 0.5rem; margin-top: 0.5rem; }
        .io-btn {
            flex: 1; font-size: 0.7rem; padding: 6px; text-align: center; border: 1px solid #cbd5e1; border-radius: 0.375rem; cursor: pointer; background: #fff; font-weight: bold; color: #475569;
        }
        .io-btn:hover { background: #f8fafc; border-color: #94a3b8; }

        /* Video Recording Area */
        .video-group {
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 0.5rem;
            background: #fff;
            margin-top: 0.5rem;
        }

        .rec-btn {
            background-color: white;
            border: 2px solid #e5e7eb;
            color: #6b7280;
            font-size: 0.75rem;
            font-weight: 700;
            border-radius: 0.25rem;
            padding-top: 0.5rem;
            padding-bottom: 0.5rem;
            transition: all 0.2s;
        }
        .rec-btn:hover {
            background-color: #fef2f2;
            color: #dc2626;
            border-color: #f87171;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .rec-btn.recording {
            background-color: #ef4444;
            color: white;
            border-color: #dc2626;
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        #reset-cam-btn {
            position: absolute; bottom: 2rem; right: 2rem;
            z-index: 50;
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.4);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex; align-items: center; gap: 0.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        #reset-cam-btn:hover { background: rgba(255,255,255,0.3); transform: scale(1.05); }
        .bg-white #reset-cam-btn { color: #333; border-color: #cbd5e1; background: rgba(255,255,255,0.8); box-shadow: 0 2px 4px rgba(0,0,0,0.05); }

        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #f3f4f6; z-index: 9999;
            display: flex; justify-content: center; align-items: center; flex-direction: column; transition: opacity 0.5s;
        }
        .spinner {
            width: 40px; height: 40px; border: 4px solid #e2e8f0; border-radius: 50%; border-top-color: #3b82f6; animation: spin 0.8s ease-in-out infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        @keyframes pulse { 50% { opacity: .5; } }

        #rec-indicator {
            position: absolute; top: 1.5rem; right: 1.5rem;
            display: flex; align-items: center; gap: 0.5rem;
            color: #ef4444; font-weight: bold; font-family: 'M PLUS Rounded 1c', sans-serif;
            background: rgba(0,0,0,0.6); padding: 0.5rem 1rem; border-radius: 9999px;
            opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 50;
        }
        .rec-dot { width: 10px; height: 10px; background: #ef4444; border-radius: 50%; }
        .recording #rec-indicator { opacity: 1; }
        .recording #rec-indicator .rec-dot { animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0; } }

        input[type=range] { height: 0.5rem; background-color: #e5e7eb; border-radius: 0.5rem; appearance: none; cursor: pointer; }
        input[type=range]::-webkit-slider-thumb { width: 1rem; height: 1rem; background-color: #3b82f6; border-radius: 50%; appearance: none; box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); transition: background-color 0.15s ease-in-out; border: 2px solid white; }
        input[type=range]::-webkit-slider-thumb:hover { background-color: #2563eb; }
        
        #aiDescText {
            font-size: 0.75rem; color: #475569; margin-top: 0.5rem; min-height: 3em; line-height: 1.5;
            background: #f1f5f9; padding: 0.75rem; border-radius: 0.5rem; border: 1px solid #e2e8f0;
        }
        
        .active-level-indicator {
            position: absolute; bottom: 6rem; left: 50%; transform: translateX(-50%);
            background: rgba(0,0,0,0.5); padding: 5px 15px; border-radius: 20px;
            color: #fff; font-size: 0.8rem; font-family: 'Cinzel', serif;
            border: 1px solid rgba(255,255,255,0.3);
            pointer-events: none; opacity: 0; transition: opacity 0.3s;
        }
        .bg-white .active-level-indicator { background: rgba(255,255,255,0.8); color: #333; border-color: #ccc; }
    </style>
</head>
<body class="flex flex-col md:flex-row h-screen w-screen overflow-hidden">

    <div id="loader">
        <div class="spinner mb-4"></div>
        <div class="text-lg font-bold text-gray-600 tracking-widest font-[Cinzel]">GIMEL STUDIO</div>
        <div class="text-xs text-gray-400 mt-2">Final (v5.9 Fix)</div>
    </div>

    <!-- 
        „É¨„Ç§„Ç¢„Ç¶„Éà‰øÆÊ≠£„ÅÆË¶Å:
        - Mobile: flex-col, order-1 (‰∏ä„Å´ÈÖçÁΩÆ)
        - Desktop: flex-row, order-none (Â∑¶„Å´ÈÖçÁΩÆ)
        - Height: Mobile„Åßh-[45%]Á®ãÂ∫¶„ÄÅDesktop„Åßh-full
    -->
    <aside class="w-full md:w-80 h-[45%] md:h-full glass-panel flex flex-col z-20 overflow-hidden shrink-0 order-1 md:order-none border-b md:border-b-0 md:border-r border-gray-200">
        <div class="p-3 md:p-5 border-b border-gray-200 bg-white/80 backdrop-blur-sm shrink-0">
            <h1 class="text-lg md:text-xl font-bold font-[Cinzel] text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 tracking-wide flex justify-between items-center">
                GIMEL STUDIO <span class="text-[0.6rem] text-gray-400">v5.9 Fix</span>
            </h1>
        </div>

        <div class="flex-1 overflow-y-auto p-3 md:p-5 pb-16 space-y-3">
            
            <!-- Gemini API Section -->
            <div class="api-section">
                <label class="label-text">
                    ‚ë£ Gemini API ÈÄ£Êê∫
                    <a href="https://aistudio.google.com/app/apikey" target="_blank" class="api-link">üîë Get Key</a>
                </label>
                <input type="password" id="apiKeyInput" placeholder="Paste API Key here..." class="mt-1">
                <div class="api-status" id="apiStatus">
                    <div class="status-indicator">
                        <div class="status-dot" id="statusDot"></div>
                        <span id="statusText" class="text-gray-500">Basic Mode</span>
                    </div>
                </div>
            </div>

            <!-- AI Generation Panel (Hidden by default) -->
            <div id="aiPanel" class="ai-panel">
                <label class="label-text text-purple-600">‚ú® Akashic Generator (AIËá™ÂãïÁîüÊàê)</label>
                <div class="ai-input-wrapper">
                    <div class="ai-input-icon">‚ú¶</div>
                    <input type="text" id="aiPromptInput" placeholder="ËÅñÈúäÂêç„ÇÑ„Ç≠„Éº„ÉØ„Éº„Éâ (‰æã: „É´„Ç¢„Éï, Ê°ú, Ê∑±Ê∑µ)...">
                </div>
                <button id="aiGenBtn" class="ai-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 1 1-6.219-8.56"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="M4.93 4.93l1.41 1.41"/><path d="M17.66 17.66l1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="M6.34 17.66l-1.41 1.41"/><path d="M19.07 4.93l-1.41 1.41"/></svg>
                    È≠îÊ≥ïÈô£„ÇíÈ°ïÁèæ„Åï„Åõ„Çã
                </button>
                <div id="aiDescText">AI„ÅåÈ≠îÊ≥ïË°ìÂºè„ÄÅÂ±ûÊÄß„ÄÅÂΩ¢Áä∂„ÄÅË©†Âî±„ÇíËá™ÂãïÁîüÊàê„Åó„Åæ„Åô„ÄÇ</div>
                
                <div class="mt-4">
                    <label class="label-text flex justify-between">
                        Archives (‰øùÂ≠ò„Åï„Çå„ÅüÈ≠îÊ≥ïÈô£)
                        <span id="saveCount" class="text-xs font-normal text-gray-400 bg-gray-100 px-2 rounded-full">0</span>
                    </label>
                    <button id="saveCurrentBtn" class="w-full text-xs border border-blue-300 text-blue-600 bg-white hover:bg-blue-50 rounded py-2 mb-2 font-bold shadow-sm">+ ÁèæÂú®„ÅÆÈ≠îÊ≥ïÈô£„Çí‰øùÂ≠ò</button>
                    <div id="savedList" class="saved-list">
                        <div class="p-4 text-center text-gray-400 italic text-[0.7rem]">No archives yet</div>
                    </div>
                    <div class="io-group">
                        <button id="exportBtn" class="io-btn">üì§ Export</button>
                        <button id="importBtn" class="io-btn">üì• Import</button>
                        <input type="file" id="importFile" style="display:none" accept=".json">
                    </div>
                </div>
            </div>

            <!-- System Type -->
            <div class="control-group">
                <label class="label-text">‚ë† È≠îÊ≥ïË°ìÂºè‰ΩìÁ≥ª (System)</label>
                <select id="magicType">
                    <option value="relative">Áõ∏ÂØæÈ≠îÊ≥ïÁêÜË´ñ (Âπ≥Èù¢„Éª„ÇÆ„É™„Ç∑„É£)</option>
                    <option value="old_bereshith">Êóß„Éô„É¨„Éº„Ç∑„Çπ (Âπ≥Èù¢„ÉªÂ∑•Â≠¶)</option>
                    <option value="new_bereshith">Êñ∞„Éô„É¨„Éº„Ç∑„Çπ (Á´ã‰Ωì„Éª„É´„Éº„É≥)</option>
                    <option value="avestorg">„Ç¢„É¥„Çß„Çπ„Éà„É´„Ç∞Âºè (Á´ã‰Ωì„Éª„Éò„Éñ„É©„Ç§)</option>
                </select>
            </div>

            <!-- Element -->
            <div class="control-group">
                <label class="label-text">‚ë° Â±ûÊÄß (Attribute)</label>
                <!-- Preset Buttons -->
                <div id="presetAttrContainer">
                    <div class="grid grid-cols-4 gap-2 mb-2">
                        <button class="attr-btn magic-btn h-9 rounded-md bg-red-50 border-red-200 text-xs text-red-700 font-bold hover:bg-red-100" data-attr="fire">ÁÅ´</button>
                        <button class="attr-btn magic-btn h-9 rounded-md bg-blue-50 border-blue-200 text-xs text-blue-700 font-bold hover:bg-blue-100" data-attr="water">Ê∞¥</button>
                        <button class="attr-btn magic-btn h-9 rounded-md bg-amber-50 border-amber-200 text-xs text-amber-800 font-bold hover:bg-amber-100" data-attr="earth">Âúü</button>
                        <button class="attr-btn magic-btn h-9 rounded-md bg-emerald-50 border-emerald-200 text-xs text-emerald-700 font-bold hover:bg-emerald-100" data-attr="wind">È¢®</button>
                    </div>
                    <div class="grid grid-cols-4 gap-2">
                        <button class="attr-btn magic-btn h-9 rounded-md bg-purple-50 border-purple-200 text-xs text-purple-700 font-bold hover:bg-purple-100" data-attr="death">Ê≠ª</button>
                        <button class="attr-btn magic-btn h-9 rounded-md bg-yellow-50 border-yellow-200 text-xs text-yellow-700 font-bold hover:bg-yellow-100" data-attr="lightning">Èõ∑</button>
                        <button class="attr-btn magic-btn h-9 rounded-md bg-pink-50 border-pink-200 text-xs text-pink-700 font-bold hover:bg-pink-100" data-attr="life">Áîü</button>
                        <button class="attr-btn magic-btn h-9 rounded-md bg-gray-100 border-gray-300 text-xs text-gray-700 font-bold hover:bg-gray-200" data-attr="anti">Âèç</button>
                    </div>
                </div>
                <!-- Custom AI Attribute Display -->
                <div id="customAttrDisplay" class="hidden mt-2 p-3 bg-white border border-purple-200 rounded-lg shadow-sm text-center relative">
                    <button id="backToPresetBtn" class="w-full text-[10px] text-gray-400 hover:text-gray-600 mb-1 flex items-center justify-center gap-1 transition-colors border-b border-gray-100 pb-1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                        „Éó„É™„Çª„ÉÉ„ÉàÈÅ∏Êäû„Å´Êàª„Çã
                    </button>
                    <div class="text-[0.65rem] uppercase tracking-widest text-gray-400 font-bold mb-1 mt-1">AI Generated Attribute</div>
                    <div id="customAttrName" class="text-xl font-[Cinzel] font-bold text-gray-800 my-1">VOID</div>
                    <div id="customAttrSpell" class="text-[0.65rem] text-gray-500 italic break-all leading-tight font-serif">...</div>
                </div>
            </div>

            <!-- Level -->
            <div class="control-group">
                <div class="flex justify-between items-center mb-2">
                    <label class="label-text mb-0">‚ë¢ ÊßãÈÄ†Âº∑Â∫¶ (Level)</label>
                    <span id="levelValue" class="text-xs font-bold text-blue-600 bg-blue-100 px-2 py-0.5 rounded-full border border-blue-200">Lv.1</span>
                </div>
                <input type="range" id="levelRange" min="1" max="6" value="1" class="w-full">
            </div>

            <!-- Rotation Speed -->
            <div class="control-group">
                <label class="label-text">ÂõûËª¢ÈÄüÂ∫¶ (Rotation)</label>
                <input type="range" id="speedRange" min="0" max="100" value="0" class="w-full">
            </div>

             <!-- Background Mode -->
             <div class="control-group">
                <label class="label-text">ËÉåÊôØ„É¢„Éº„Éâ (Background)</label>
                <div class="bg-toggle-container">
                    <div class="bg-toggle-btn active" data-bg="black">
                        <span class="text-lg">üåô</span> Dark
                    </div>
                    <div class="bg-toggle-btn" data-bg="white">
                        <span class="text-lg">‚òÄ</span> Light
                    </div>
                </div>
            </div>

            <!-- Planetary Toggle & FX Toggle -->
            <div class="grid grid-cols-2 gap-2 mt-2">
                <div class="switch-group mt-0 flex-1">
                    <label class="label-text mb-0 flex items-center gap-1 cursor-pointer text-[0.65rem]">
                        <span>ü™ê ÊÉëÊòü (Planets)</span>
                    </label>
                    <div>
                        <input type="checkbox" id="planetToggle" class="toggle-checkbox" checked>
                        <label for="planetToggle" class="toggle-label scale-90">
                            <div class="toggle-circle"></div>
                        </label>
                    </div>
                </div>
                <div class="switch-group mt-0 flex-1 border-purple-200 bg-purple-50">
                    <label class="label-text mb-0 flex items-center gap-1 cursor-pointer text-[0.65rem] text-purple-700">
                        <span>‚ö° „Ç®„Éï„Çß„ÇØ„Éà (FX)</span>
                    </label>
                    <div>
                        <input type="checkbox" id="fxToggle" class="toggle-checkbox">
                        <label for="fxToggle" class="toggle-label scale-90 bg-purple-200">
                            <div class="toggle-circle shadow-sm"></div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Output Actions -->
            <div class="control-group mt-4 border-t-0 bg-transparent p-0">
                <label class="label-text mb-2">Âá∫Âäõ„Ç™„Éó„Ç∑„Éß„É≥</label>
                
                <!-- Transparent Toggle -->
                <div class="switch-group mb-3">
                    <label class="label-text mb-0 flex items-center gap-1 cursor-pointer">
                        <span>üî≥ ËÉåÊôØÈÄèÈÅé (Transparent)</span>
                    </label>
                    <div>
                        <input type="checkbox" id="transparentToggle" class="toggle-checkbox">
                        <label for="transparentToggle" class="toggle-label">
                            <div class="toggle-circle"></div>
                        </label>
                    </div>
                </div>

                <button id="captureBtn" class="w-full magic-btn bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white text-xs font-bold py-3 rounded-lg shadow-lg flex items-center justify-center gap-2 tracking-wide mb-3 border-none">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>
                    Ë∂ÖÈ´òËß£ÂÉèÂ∫¶‰øùÂ≠ò (PNG 5x)
                </button>

                <div class="video-group">
                    <div class="text-[10px] text-gray-500 font-bold mb-1 pl-1 flex items-center gap-1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M23 7l-7 5 7 5V7z"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/></svg>
                        ÂãïÁîª„Çí‰øùÂ≠ò (WebM 60fps)
                    </div>
                    <div class="grid grid-cols-4 gap-2">
                        <button class="rec-btn" data-sec="5">5s</button>
                        <button class="rec-btn" data-sec="10">10s</button>
                        <button class="rec-btn" data-sec="15">15s</button>
                        <button class="rec-btn" data-sec="20">20s</button>
                    </div>
                </div>
            </div>
        </div>
    </aside>

    <!-- 
        „É¨„Ç§„Ç¢„Ç¶„Éà‰øÆÊ≠£„ÅÆË¶Å:
        - Mobile: flex-1, h-auto, order-2 (‰∏ã„Å´ÈÖçÁΩÆ)
        - Desktop: flex-1, h-full, order-none
    -->
    <main class="w-full flex-1 md:h-full relative bg-black overflow-hidden transition-colors duration-500 order-2 md:order-none" id="main-canvas-area">
        <div id="rec-indicator">
            <div class="rec-dot"></div>
            <span>REC</span>
        </div>

        <button id="reset-cam-btn">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
            Ë¶ñÁÇπ„É™„Çª„ÉÉ„Éà
        </button>

        <div class="absolute top-6 left-6 pointer-events-none z-10 select-none">
            <div id="magicNameDisplay" class="text-xl md:text-2xl font-[Cinzel] font-bold text-white opacity-80 drop-shadow-[0_2px_10px_rgba(0,0,0,0.8)] tracking-widest">
                FIRE CIRCLE
            </div>
            <div id="magicSubDisplay" class="text-xs md:text-sm font-serif text-gray-300 opacity-80 mt-1 tracking-wider border-l-4 border-gray-500 pl-3">
                Relative Magic Theory
            </div>
        </div>
        
        <div id="activeLevelInfo" class="active-level-indicator">Lv.1 SALAMANDER</div>

        <div id="canvas-container" class="w-full h-full cursor-move"></div>
    </main>

    <script>
        const _0x30f7bc=_0xc341;(function(_0x1e4fd7,_0x3eb244){const _0x3d4b60=_0xc341,_0x597fe7=_0x1e4fd7();while(!![]){try{const _0x20aafc=parseInt(_0x3d4b60(0x171))/0x1*(parseInt(_0x3d4b60(0x1ce))/0x2)+-parseInt(_0x3d4b60(0x201))/0x3+-parseInt(_0x3d4b60(0x118))/0x4+parseInt(_0x3d4b60(0x141))/0x5*(parseInt(_0x3d4b60(0x1b4))/0x6)+-parseInt(_0x3d4b60(0xd7))/0x7*(parseInt(_0x3d4b60(0xad))/0x8)+parseInt(_0x3d4b60(0xce))/0x9*(parseInt(_0x3d4b60(0x1a9))/0xa)+parseInt(_0x3d4b60(0x1dd))/0xb*(parseInt(_0x3d4b60(0xee))/0xc);if(_0x20aafc===_0x3eb244)break;else _0x597fe7['push'](_0x597fe7['shift']());}catch(_0x3ab3a8){_0x597fe7['push'](_0x597fe7['shift']());}}}(_0x4922,0x82e28));const config={'type':_0x30f7bc(0x199),'attribute':_0x30f7bc(0xe9),'level':0x1,'speed':0x0,'bgMode':_0x30f7bc(0x154),'highPrecision':![],'apiKey':'','showPlanets':!![],'enableFx':![],'transparentBg':![]};let lastPreset=_0x30f7bc(0xe9),indicatorTimer=null;const attrIds={'fire':0x1,'water':0x2,'earth':0x3,'wind':0x4,'lightning':0x5,'death':0x6,'life':0x7,'anti':0x8},defaultAttributes={'fire':{'hex':0xff4500,'glow':0xff6a00,'name':_0x30f7bc(0xdc),'shapeSides':0x3,'core':'tetra','spells':[_0x30f7bc(0x1c1),_0x30f7bc(0x176),'SOL\x20INVICTUS\x20APOLLON\x20MUSICA','FABER\x20DEORUM\x20HEPHAESTUS\x20CREATIO',_0x30f7bc(0xe7),_0x30f7bc(0x179)]},'water':{'hex':0xbfff,'glow':0xffff,'name':_0x30f7bc(0x11c),'shapeSides':0x6,'core':'icosa','spells':[_0x30f7bc(0x143),_0x30f7bc(0x149),_0x30f7bc(0x14a),_0x30f7bc(0x168),_0x30f7bc(0x15b),'PRIMUS\x20AMOR\x20EROS\x20VINCULUM\x20UNIVERSALIS']},'earth':{'hex':0xa0522d,'glow':0xff8c00,'name':_0x30f7bc(0x1e8),'shapeSides':0x4,'core':_0x30f7bc(0x1e6),'spells':[_0x30f7bc(0x15d),_0x30f7bc(0x140),_0x30f7bc(0xab),_0x30f7bc(0x109),_0x30f7bc(0x202),_0x30f7bc(0x190)]},'wind':{'hex':0x32cd32,'glow':0x98fb98,'name':'Wind','shapeSides':0x5,'core':_0x30f7bc(0xb3),'spells':[_0x30f7bc(0x197),_0x30f7bc(0x17f),_0x30f7bc(0x1a8),_0x30f7bc(0x1ef),_0x30f7bc(0xc4),_0x30f7bc(0x210)]},'death':{'hex':0x9400d3,'glow':0xd8bfd8,'name':_0x30f7bc(0x14b),'shapeSides':0x5,'core':_0x30f7bc(0xbb),'spells':['MORS\x20CERTA\x20HORA\x20INCERTA\x20SHADE',_0x30f7bc(0x13f),'SAPIENTIA\x20MORTIS\x20ATHENA\x20STRATEGIA',_0x30f7bc(0x135),'DESTRUCTOR\x20MUNDI\x20SHIVA\x20TANDAVA','MATER\x20MORTIS\x20IZANAMI\x20YOMI\x20AETERNUM']},'lightning':{'hex':0xffd700,'glow':0xffea00,'name':_0x30f7bc(0x16c),'shapeSides':0x7,'core':_0x30f7bc(0xc5),'spells':[_0x30f7bc(0x1f1),_0x30f7bc(0x204),'DEUS\x20BELLI\x20ARES\x20FUROR\x20DIVINUS',_0x30f7bc(0xe4),_0x30f7bc(0x173),_0x30f7bc(0x157)]},'life':{'hex':0xff1493,'glow':0xff69b4,'name':_0x30f7bc(0xf6),'shapeSides':0x6,'core':_0x30f7bc(0x1ff),'spells':[_0x30f7bc(0xd5),_0x30f7bc(0x189),'AURORA\x20SPES\x20NOVA\x20EOS\x20EXORDIUM','TEMPESTAS\x20VITAE\x20SUSANOO\x20VIRTUS',_0x30f7bc(0x126),_0x30f7bc(0xca)]},'anti':{'hex':0x333333,'glow':0xff0000,'name':'Anti-Life','shapeSides':0x8,'core':_0x30f7bc(0x1ff),'spells':[_0x30f7bc(0xa7),'RADIX\x20MALI\x20IBLIS\x20SUPERBIA',_0x30f7bc(0x1f8),_0x30f7bc(0x178),_0x30f7bc(0x19e),_0x30f7bc(0x1e2)]}};function _0x4922(){const _0x124cb5=['innerHTML','match','Vector3','#10b981','6hIwCVR','sec','tetra','setPixelRatio','fill','magicType','\x0a‰ª•‰∏ã„ÅÆJSONÂΩ¢Âºè„Åß„ÅÆ„ÅøÂá∫Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇJSON‰ª•Â§ñ„ÅÆËß£Ë™¨Êñá„ÅØ‰∏çË¶Å„Åß„Åô„ÄÇ\x0a\x0aJSON„Éï„Ç©„Éº„Éû„ÉÉ„Éà:\x0a{\x0a\x20\x20\x22key\x22:\x20\x22unique_key_name\x22,\x0a\x20\x20\x22name\x22:\x20\x22Â±ûÊÄßÂêçÔºàÊó•Êú¨Ë™ûÔºâ\x22,\x0a\x20\x20\x22hex\x22:\x20\x220xRRGGBB\x22,\x0a\x20\x20\x22glow\x22:\x20\x220xRRGGBB\x22,\x0a\x20\x20\x22shapeSides\x22:\x203„Äú12„ÅÆÊï¥Êï∞,\x0a\x20\x20\x22spell\x22:\x20\x22„É©„ÉÜ„É≥Ë™û„ÇÑ„É´„Éº„É≥ÊñáÂ≠óÈ¢®„ÅÆÁ•ûÁßòÁöÑ„Å™Èï∑„ÅÑÂë™Êñá\x22,\x0a\x20\x20\x22core\x22:\x20\x22tetra\x22\x20„Åæ„Åü„ÅØ\x20\x22box\x22\x20„Åæ„Åü„ÅØ\x20\x22octa\x22\x20„Åæ„Åü„ÅØ\x20\x22dodeca\x22\x20„Åæ„Åü„ÅØ\x20\x22icosa\x22\x20„Åæ„Åü„ÅØ\x20\x22torus\x22\x20„Åæ„Åü„ÅØ\x20\x22merkaba\x22,\x0a\x20\x20\x22desc\x22:\x20\x22„Åì„ÅÆÂ±ûÊÄß„ÅÆÈ≠îÊ≥ïÁöÑ„Å™Ë®≠ÂÆöËß£Ë™¨Ôºà100ÊñáÂ≠ó‰ª•ÂÜÖÔºâ\x22\x0a}','icosa','text','isArray','setFromPoints','„Äç\x0a„Åì„Çå„Çâ„ÅÆ„Ç≠„Éº„ÉØ„Éº„Éâ„ÇíÂÖ®„Å¶Áµ±Âêà„ÉªËß£Èáà„Åó„ÄÅ‰∏Ä„Å§„ÅÆÊñ∞„Åó„ÅÑÁã¨ÂâµÁöÑ„Å™È≠îÊ≥ïÈô£„ÅÆÂ±ûÊÄßÔºàÊ¶ÇÂøµÔºâ„ÇíÊßãÁØâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\x0aÂçòÁ¥î„Å™ÁµêÂêà„Åß„ÅØ„Å™„Åè„ÄÅ„Ç≠„Éº„ÉØ„Éº„Éâ„Åã„ÇâÈÄ£ÊÉ≥„Åï„Çå„ÇãÊ∑±ÈÅ†„Å™„ÉÜ„Éº„Éû„ÇÑÁâ©Ë™ûÊÄß„ÇíËæº„ÇÅ„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\x0aÔºà‰æãÔºöÂÖ•Âäõ„ÄåÈõ∑,\x20Èºì,\x20È¨º„Äç‚Üí\x20Â±ûÊÄßÂêç„ÄåÈ≥¥Á•ûÔºà„Éä„É´„Ç´„ÉüÔºâ„Äç„ÇÑ„ÄåËΩüÈõ∑„Äç„Å™„Å©Ôºâ','white','SPIRITUS\x20IGNIS\x20SALAMANDER','hex','change','Group','beginPath','setAttribute','innerHeight','aspect','image/png','add','setScalar','fxToggle','gimel_magics_backup.json','18hOSUwW','fillRect','transparentToggle','clientX','copy','IcosahedronGeometry','createRadialGradient','exportBtn','clientWidth','size','avestorg','setHex','blending','bold\x20','rgb(','17479jQXGHa','max','SphereGeometry','RingGeometry','radius','CHAOS\x20NUCLEARIS\x20AZATHOTH\x20NULLUS\x20ORDO','uOpacity','canvas-container','loading','box','sin','Earth','isPoints','DodecahedronGeometry','div','revokeObjectURL','uActive','random','LUNA\x20CLEMENS\x20SELENE\x20FORTUNA','href','FULGUR\x20SCIENTIAE\x20TESLA\x20ORION','attr','splice','isHighP','backToPresetBtn','threshold','custom_','IRA\x20DIVINA\x20NEMESIS\x20VINDICTA','bereshith','aiDescText','translate','click','Lv.','highPrecision','merkaba','middle','769608lGtUyo','MAGNA\x20MATER\x20RHEA\x20GENITRIX\x20DEORUM','createElement','HEROS\x20INVICTUS\x20HERACLES\x20VIRTUS','magicSubDisplay','strength','presetAttrContainer','toString','customAttrSpell','Basic','toDataURL','rgba(255,\x20255,\x20255,\x200.4)','classList','saveCount','captureBtn','PATER\x20CREATOR\x20IZANAGI\x20GENESIS\x20MUNDI','isPlanetSystem','[data-attr=\x22fire\x22]','lineWidth','rgba(0,\x200,\x200,\x200)','DoubleSide','connected','death','orbitSpeed','MATERIA\x20OBSCURA\x20PANDORA\x20VANITAS','ondataavailable','<svg\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21\x2012a9\x209\x200\x201\x201-6.219-8.56\x22/><path\x20d=\x22M12\x202v2\x22/><path\x20d=\x22M12\x2020v2\x22/><path\x20d=\x22M4.93\x204.93l1.41\x201.41\x22/><path\x20d=\x22M17.66\x2017.66l1.41\x201.41\x22/><path\x20d=\x22M2\x2012h2\x22/><path\x20d=\x22M20\x2012h2\x22/><path\x20d=\x22M6.34\x2017.66l-1.41\x201.41\x22/><path\x20d=\x22M19.07\x204.93l-1.41\x201.41\x22/></svg>\x20È≠îÊ≥ïÈô£„ÇíÈ°ïÁèæ„Åï„Åõ„Çã','touchmove','LUNA\x20VENATRIX\x20ARTEMIS\x20VIA\x20VERITATIS','#9ca3af','8tJppmE','cos','clientHeight','center','earth','anisotropy','octa','mousemove','video/webm','Akashic\x20Connected','canvas','scale','appendChild','BoxGeometry','dodeca','gimel_saved_magics','video/webm;\x20codecs=vp9','result','transparentBg','arc','children','captureStream','touchend','SAPIENTIA\x20INFINITA\x20OMOIKANE\x20VENTUS','torus','magic_','unshift','setSize','isMerkaba','EGO\x20SUM\x20QUI\x20SUM\x20YAHWEH\x20ORDO\x20UNIVERSALIS','material','getDelta','stringify','9pmezqt','resize','hidden','fillStyle','Float32BufferAttribute','split','string','SPIRITUS\x20SANCTUS\x20RUACH\x20LOGOS','dispose','5993330aYuZtT','Color','data','BufferGeometry','fillText','Fire','parse','customAttrName','mousedown','querySelector','TorusGeometry','state','width','MALLEUS\x20TONITRUS\x20THOR\x20JUSTITIA','.png','error','IGNIS\x20DIVINUS\x20PROMETHEUS\x20SAPIENTIA','userData','fire','clientY','geometry','style','touches','1308wlcpOK','body','showPlanets','.bg-toggle-btn','sqrt','acos','main-canvas-area','currentTarget','Life','closed','setClearColor','Scene','includes','water','bg-black','checked','rotation','now','innerText','download','High\x20quality\x20recording\x20failed,\x20fallback\x20to\x20default.','name','attribute','PointsMaterial','restore','push','className','MATER\x20FRUMENTI\x20DEMETER\x20ABUNDANTIA','WireframeGeometry','Mesh','clear','<svg\x20class=\x22animate-spin\x22\x20width=\x2216\x22\x20height=\x2216\x22\x20viewBox=\x220\x200\x2024\x2024\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20stroke-width=\x222\x22\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22><path\x20d=\x22M21\x2012a9\x209\x200\x201\x201-6.219-8.56\x22/></svg>\x20Generating...','start','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vPos;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vPos\x20=\x20position;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_Position\x20=\x20projectionMatrix\x20*\x20modelViewMatrix\x20*\x20vec4(position,\x201.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','attrKey','getElementById','span','updateProjectionMatrix','parts','Points','\x20Activation:\x20','magicNameDisplay','1469748oyzZqu','levelRange','MAGIC\x20CIRCLE','WebGLRenderer','Water','old_bereshith','Failed\x20to\x20parse\x20ancient\x20texts.','CanvasTexture','color','stroke','levelValue','desc','save','createObjectURL','SAPIENTIA\x20DOMINI\x20AHURA\x20MAZDA\x20LUX','traverse','length','EdgesGeometry','active','apiKey','customAttrDisplay','set','AmbientLight','type','autoClear','target','life','shapeSides','speed','REX\x20UMBRARUM\x20HADES\x20JUDICIUM','querySelectorAll','Clock','map','px\x20\x22Cinzel\x22','startsWith','aiPanel','.attr-btn','rotSpeed','MeshBasicMaterial','REGINA\x20INFERNI\x20PERSEPHONE\x20VER','PRINCEPS\x20TERRAE\x20ANDROMEDA\x20FLOS','2793175YqgfDh','wind','AQUA\x20VITAE\x20UNDINE\x20PURIFICATIO','clone','„ÅÇ„Å™„Åü„ÅØ„Éï„Ç°„É≥„Çø„Ç∏„ÉºRPG„ÄéÊòüËº™„ÅÆ„ÇÆ„É°„É´„Çπ„Äè„ÅÆË®≠ÂÆö‰ΩúÂÆ∂„Åß„Åô„ÄÇ','bg-white','domElement','level','VINUM\x20SACRUM\x20DIONYSUS\x20SAPIENTIA','VENUS\x20APHRODITE\x20AMOR\x20ET\x20FORMA','Death','visible','innerWidth','Vector2','textAlign','addColorStop','lookAt','AdditiveBlending','Êñ∞„Åó„ÅÑ„ÄÅÁã¨ÂâµÁöÑ„Å™„ÄåÈ≠îÊ≥ïÈô£„ÅÆÂ±ûÊÄß„Äç„Çí1„Å§ËÄÉÊ°à„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ\x0aÊó¢Â≠ò„ÅÆÁÅ´„ÉªÊ∞¥„ÉªÂúü„ÉªÈ¢®„ÉªÈõ∑„ÉªÊ≠ª„ÉªÁîü„ÉªÂèç\x20‰ª•Â§ñ„ÅÆ„É¶„Éã„Éº„ÇØ„Å™Â±ûÊÄßÔºà‰æãÔºöÊ°ú„ÄÅÊ≠ØËªä„ÄÅËôöÁ©∫„ÄÅÊôÇ„ÄÅÁ°ùÂ≠ê„ÄÅÊ∑±Ê∑µ„Å™„Å©Ôºâ„Å´„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ','black','value','&times;','JUPITER\x20OPTIMUS\x20MAXIMUS\x20ZEUS\x20FULMEN','addPass','opacity','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20uTime;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20vec3\x20uColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20uOpacity;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20int\x20uType;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20bool\x20uActive;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vPos;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20rand(vec2\x20n)\x20{\x20return\x20fract(sin(dot(n,\x20vec2(12.9898,\x204.1414)))\x20*\x2043758.5453);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20noise(vec2\x20p){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20ip\x20=\x20floor(p);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20u\x20=\x20fract(p);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20u\x20=\x20u*u*(3.0-2.0*u);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20res\x20=\x20mix(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mix(rand(ip),\x20rand(ip+vec2(1.0,0.0)),\x20u.x),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mix(rand(ip+vec2(0.0,1.0)),\x20rand(ip+vec2(1.0,1.0)),\x20u.x),\x20u.y);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20res*res;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec4\x20color\x20=\x20vec4(uColor,\x20uOpacity);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(uActive)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20t\x20=\x20uTime;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20n\x20=\x200.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(uType\x20==\x201)\x20{\x20//\x20Fire\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20n\x20=\x20noise(vPos.xy\x20*\x202.0\x20-\x20vec2(0.0,\x20t\x20*\x206.0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20heat\x20=\x201.0\x20-\x20smoothstep(0.0,\x201.0,\x20vPos.z\x20*\x200.5\x20+\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.rgb\x20+=\x20vec3(0.5,\x200.2,\x200.0)\x20*\x20n\x20*\x20heat;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.a\x20*=\x20(0.8\x20+\x200.4\x20*\x20sin(t\x20*\x2015.0\x20+\x20vPos.x\x20*\x205.0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x202)\x20{\x20//\x20Water\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20wave1\x20=\x20sin(vPos.x\x20*\x204.0\x20+\x20t\x20*\x202.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20wave2\x20=\x20cos(vPos.y\x20*\x204.0\x20+\x20t\x20*\x202.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20caustic\x20=\x20smoothstep(0.4,\x200.6,\x20(wave1\x20+\x20wave2)\x20*\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.rgb\x20=\x20mix(uColor,\x20vec3(0.7,\x200.9,\x201.0),\x20caustic\x20*\x200.6);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.a\x20*=\x200.9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x203)\x20{\x20//\x20Earth\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20pulse\x20=\x20sin(t\x20*\x202.0\x20+\x20vPos.x\x20+\x20vPos.y)\x20*\x200.5\x20+\x200.5;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.rgb\x20=\x20mix(uColor,\x20vec3(0.8,\x200.6,\x200.4),\x20pulse\x20*\x200.4);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.a\x20=\x20uOpacity\x20+\x200.2\x20*\x20pulse;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x204)\x20{\x20//\x20Wind\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20stream\x20=\x20noise(vec2(vPos.x\x20*\x202.0\x20+\x20t\x20*\x2010.0,\x20vPos.y));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.rgb\x20=\x20mix(uColor,\x20vec3(0.8,\x201.0,\x200.9),\x20stream\x20*\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.a\x20*=\x20(0.6\x20+\x200.6\x20*\x20stream);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x205)\x20{\x20//\x20Lightning\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20bolt\x20=\x20step(0.85,\x20rand(vec2(floor(vPos.x\x20*\x2010.0\x20+\x20t\x20*\x2020.0),\x20floor(vPos.y\x20*\x2010.0))));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.rgb\x20=\x20mix(uColor,\x20vec3(1.0,\x201.0,\x200.8),\x20bolt);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.a\x20=\x20mix(uOpacity,\x201.0,\x20bolt);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x206)\x20{\x20//\x20Death\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20mist\x20=\x20noise(vec2(vPos.x,\x20vPos.y\x20-\x20t));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.rgb\x20=\x20mix(uColor,\x20vec3(0.1,\x200.0,\x200.2),\x20mist);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.a\x20*=\x20(0.7\x20+\x200.3\x20*\x20sin(t\x20*\x203.0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x207)\x20{\x20//\x20Life\x20-\x20Soft\x20Pulse\x20Adjustment\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Slowed\x20down\x20frequency\x20(0.5x\x20speed)\x20and\x20softer\x20wave\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20beat\x20=\x20sin(t\x20*\x202.0)\x20*\x200.5\x20+\x200.5;\x20//\x20Smooth\x20sine\x20wave\x200.0\x20to\x201.0\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.rgb\x20+=\x20vec3(0.2,\x200.05,\x200.2)\x20*\x20beat;\x20//\x20Softer\x20glow\x20addition\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.a\x20+=\x20beat\x20*\x200.2;\x20//\x20Gentle\x20opacity\x20pulse\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x208)\x20{\x20//\x20Anti\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20glitch\x20=\x20step(0.9,\x20rand(vec2(vPos.y\x20*\x2050.0,\x20t\x20*\x2010.0)));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if(glitch\x20>\x200.5)\x20color.rgb\x20=\x20vec3(1.0,\x200.0,\x200.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color.a\x20*=\x20(0.5\x20+\x200.5\x20*\x20rand(vec2(t,\x20vPos.x)));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20color;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','REX\x20MARIS\x20POSEIDON\x20TRIDENS','NormalBlending','TERRA\x20MATER\x20GNOME\x20FUNDAMENTUM','fog','join','.rec-btn','lightning','recording','input','forEach','rotate','onclick','anti','VESTA\x20HESTIA\x20SACRUM\x20FOCUS','aiGenBtn','.webm','Basic\x20Mode','Lightning','font','uColor','background','planetToggle','31162PYCnTz','FogExp2','REX\x20DEORUM\x20INDRA\x20VAJRA\x20VICTORIA','getPixelRatio','UltraRes','HEROS\x20PERSEUS\x20LUX\x20PATRIAE','„É¶„Éº„Ç∂„Éº„Åã„Çâ„ÅÆ„Ç≠„Éº„ÉØ„Éº„Éâ:\x20„Äå','MONSTRUM\x20MARIS\x20LEVIATHAN\x20INVIDIA','AMATERASU\x20OMIKAMI\x20SOL\x20ORIENS\x20ORDO\x20MUNDI','setItem','height','attrData','replace','mimeType','REX\x20VENTORUM\x20AEOLUS\x20TEMPESTAS','render','Line','content','uniforms','mouseup','addEventListener','json','CatmullRomCurve3','UnrealBloomPass','QUINTA\x20ESSENTIA\x20ETHER\x20SOLOMON','TetrahedronGeometry','core','TorusKnotGeometry','spell','dataset','statusText','GAIA\x20OMNIPOTENS\x20ORIGO\x20VITAE\x20TERRA','CircleGeometry','bgMode','onstop','glow','isTypeSupported','toUpperCase','SPIRITUS\x20VENTI\x20SYLPHID\x20LIBERTAS','min','relative','ShaderMaterial','px\x20\x22Noto\x20Sans\x20Runic\x22,\x20sans-serif','Please\x20enter\x20API\x20Key\x20first.','new_bereshith','LUX\x20FERRE\x20LUCIFER\x20PECCATUM\x20ORIGINALE','isAnti','RenderPass','stop','OctahedronGeometry','remove','PlaneGeometry','enableFx','strokeStyle','Akashic\x20Records\x20are\x20being\x20accessed...','NUNTIUS\x20DEORUM\x20HERMES\x20VELOCITAS','10039730TCeFbM','TubeGeometry','toLocaleString','getContext','position','AI\x20Generated\x20Magic','spells'];_0x4922=function(){return _0x124cb5;};return _0x4922();}let currentAttributes=JSON[_0x30f7bc(0xdd)](JSON[_0x30f7bc(0xcd)](defaultAttributes)),savedMagics=[];const greekMap={'A':'Œë','B':'Œí','C':'Œö','D':'Œî','E':'Œï','F':'Œ¶','G':'Œì','H':'Œó','I':'Œô','J':'Œô','K':'Œö','L':'Œõ','M':'Œú','N':'Œù','O':'Œü','P':'Œ†','Q':'Œö','R':'Œ°','S':'Œ£','T':'Œ§','U':'Œ•','V':'Œí','W':'Œ©','X':'Œû','Y':'Œ•','Z':'Œñ','\x20':'\x20'},runeMap={'A':'·ö®','B':'·õí','C':'·ö≤','D':'·õû','E':'·õñ','F':'·ö†','G':'·ö∑','H':'·ö∫','I':'·õÅ','J':'·õÉ','K':'·ö≤','L':'·õö','M':'·õó','N':'·öæ','O':'·õü','P':'·õà','Q':'·ö≤','R':'·ö±','S':'·õä','T':'·õè','U':'·ö¢','V':'·öπ','W':'·öπ','X':'·õâ','Y':'·õÉ','Z':'·õâ','\x20':'\x20'},hebrewMap={'A':'◊ê','B':'◊ë','C':'◊õ','D':'◊ì','E':'◊î','F':'◊§','G':'◊í','H':'◊ó','I':'◊ô','J':'◊ô','K':'◊õ','L':'◊ú','M':'◊û','N':'◊†','O':'◊¢','P':'◊§','Q':'◊ß','R':'◊®','S':'◊°','T':'◊™','U':'◊ï','V':'◊ï','W':'◊ï','X':'◊¶','Y':'◊ô','Z':'◊ñ','\x20':'\x20'};function toGreek(_0x400e71){const _0x2c31cd=_0x30f7bc;return _0x400e71[_0x2c31cd(0x196)]()[_0x2c31cd(0xd3)]('')[_0x2c31cd(0x138)](_0x5d620c=>greekMap[_0x5d620c]||_0x5d620c)[_0x2c31cd(0x15f)]('');}function toRunes(_0x5801bc){return _0x5801bc['toUpperCase']()['split']('')['map'](_0x24be99=>runeMap[_0x24be99]||_0x24be99)['join']('');}function toHebrew(_0x419bea){const _0x25a0ab=_0x30f7bc;return _0x419bea['toUpperCase']()[_0x25a0ab(0xd3)]('')['map'](_0x192995=>hebrewMap[_0x192995]||_0x192995)[_0x25a0ab(0x15f)]('');}let scene,camera,renderer,clock,composer,bloomPass,magicGroup,particleSystem,backingPlane,glowTexture,animationId,mediaRecorder,recordedChunks=[],isRecording=![],activeShaderMat=null,auraShaderMat=null;const magicVertexShader=_0x30f7bc(0x10f),magicFragmentShader=_0x30f7bc(0x15a),auraFragmentShader='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20uTime;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20vec3\x20uColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20float\x20uOpacity;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20int\x20uType;\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20uniform\x20bool\x20uActive;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20varying\x20vec3\x20vPos;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20rand(vec2\x20n)\x20{\x20return\x20fract(sin(dot(n,\x20vec2(12.9898,\x204.1414)))\x20*\x2043758.5453);\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20noise(vec2\x20p){\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20ip\x20=\x20floor(p);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec2\x20u\x20=\x20fract(p);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20u\x20=\x20u*u*(3.0-2.0*u);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20res\x20=\x20mix(\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mix(rand(ip),\x20rand(ip+vec2(1.0,0.0)),\x20u.x),\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20mix(rand(ip+vec2(0.0,1.0)),\x20rand(ip+vec2(1.0,1.0)),\x20u.x),\x20u.y);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20res*res;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20void\x20main()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(!uActive)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20discard;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Distance\x20from\x20center\x20(0\x20to\x201)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20dist\x20=\x20length(vPos.xy)\x20/\x2010.0;\x20//\x20Assuming\x20plane\x20size\x20~20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(dist\x20>\x201.0)\x20discard;\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20t\x20=\x20uTime;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20vec3\x20finalColor\x20=\x20uColor;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20alpha\x20=\x200.0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Calculate\x20angle\x20for\x20radial\x20effects\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20ang\x20=\x20atan(vPos.y,\x20vPos.x);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Soft\x20circle\x20mask\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20mask\x20=\x201.0\x20-\x20smoothstep(0.0,\x201.0,\x20dist);\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(uType\x20==\x201)\x20{\x20//\x20Fire\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20flame\x20=\x20noise(vec2(vPos.x\x20*\x202.0,\x20vPos.y\x20*\x202.0\x20-\x20t\x20*\x204.0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alpha\x20=\x20mask\x20*\x20flame\x20*\x200.5\x20*\x20(1.0\x20-\x20dist);\x20//\x20Fade\x20out\x20at\x20edges\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20finalColor\x20=\x20mix(uColor,\x20vec3(1.0,\x200.5,\x200.0),\x20flame\x20*\x200.5);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x202)\x20{\x20//\x20Water\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20ripple\x20=\x20sin(dist\x20*\x2030.0\x20-\x20t\x20*\x205.0)\x20*\x200.5\x20+\x200.5;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alpha\x20=\x20mask\x20*\x20ripple\x20*\x200.3;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20finalColor\x20=\x20mix(uColor,\x20vec3(0.0,\x200.5,\x201.0),\x20ripple);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x203)\x20{\x20//\x20Earth\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20crack\x20=\x20step(0.6,\x20noise(vPos.xy\x20*\x203.0));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alpha\x20=\x20mask\x20*\x20crack\x20*\x200.2;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x204)\x20{\x20//\x20Wind\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20spiral\x20=\x20sin(ang\x20*\x208.0\x20+\x20dist\x20*\x2020.0\x20-\x20t\x20*\x2010.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alpha\x20=\x20mask\x20*\x20(0.1\x20+\x200.3\x20*\x20smoothstep(0.0,\x201.0,\x20spiral));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x205)\x20{\x20//\x20Lightning\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20bolt\x20=\x20step(0.97,\x20noise(vec2(ang\x20*\x205.0,\x20t\x20*\x2010.0)));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alpha\x20=\x20mask\x20*\x20bolt\x20*\x200.6;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20finalColor\x20=\x20vec3(1.0,\x201.0,\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x206)\x20{\x20//\x20Death\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20fog\x20=\x20noise(vPos.xy\x20-\x20vec2(0.0,\x20t\x20*\x200.5));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alpha\x20=\x20mask\x20*\x20fog\x20*\x200.5;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20finalColor\x20=\x20mix(uColor,\x20vec3(0.0),\x200.8);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x207)\x20{\x20//\x20Life\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20ring\x20=\x20fract(dist\x20*\x205.0\x20-\x20t);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20glow\x20=\x20smoothstep(0.0,\x200.2,\x20ring)\x20-\x20smoothstep(0.2,\x200.4,\x20ring);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alpha\x20=\x20mask\x20*\x20glow\x20*\x200.4;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20if\x20(uType\x20==\x208)\x20{\x20//\x20Anti\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20float\x20staticNoise\x20=\x20rand(vPos.xy\x20*\x2010.0\x20+\x20t);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alpha\x20=\x20mask\x20*\x20staticNoise\x20*\x200.3;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20finalColor\x20=\x20vec3(0.0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20alpha\x20=\x20mask\x20*\x200.2;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20gl_FragColor\x20=\x20vec4(finalColor,\x20alpha\x20*\x20uOpacity);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20';function init(){const _0x93e81e=_0x30f7bc,_0xb68935=document['getElementById'](_0x93e81e(0x1e4));scene=new THREE[(_0x93e81e(0xf9))](),camera=new THREE['PerspectiveCamera'](0x3c,_0xb68935[_0x93e81e(0x1d6)]/_0xb68935[_0x93e81e(0xaf)],0.1,0x3e8),camera[_0x93e81e(0x1ad)][_0x93e81e(0x12d)](0x0,0x0,0x10),renderer=new THREE[(_0x93e81e(0x11b))]({'antialias':!![],'alpha':!![],'preserveDrawingBuffer':!![]}),renderer[_0x93e81e(0xc8)](_0xb68935[_0x93e81e(0x1d6)],_0xb68935['clientHeight']),renderer['setPixelRatio'](Math[_0x93e81e(0x198)](window['devicePixelRatio'],0x2)),renderer[_0x93e81e(0x130)]=![],_0xb68935['appendChild'](renderer[_0x93e81e(0x147)]);const _0x21bf1c=new THREE[(_0x93e81e(0x1a0))](scene,camera);bloomPass=new THREE[(_0x93e81e(0x188))](new THREE[(_0x93e81e(0x14e))](window[_0x93e81e(0x14d)],window[_0x93e81e(0x1c7)]),1.5,0.4,0.85),composer=new THREE['EffectComposer'](renderer),composer[_0x93e81e(0x158)](_0x21bf1c),composer[_0x93e81e(0x158)](bloomPass),glowTexture=createGlowTexture();const _0x346d83=new THREE[(_0x93e81e(0x1a4))](0x64,0x64),_0x54d082=new THREE[(_0x93e81e(0x13e))]({'color':0x0,'transparent':!![],'opacity':0x0,'depthWrite':![]});backingPlane=new THREE[(_0x93e81e(0x10b))](_0x346d83,_0x54d082),backingPlane[_0x93e81e(0x1ad)]['z']=-0xa,scene[_0x93e81e(0x1ca)](backingPlane);let _0xecd4aa=![],_0x33bc08={'x':0x0,'y':0x0},_0x30dc31=0x0;_0xb68935['addEventListener'](_0x93e81e(0xdf),_0x1ab3b7=>{const _0x15b33a=_0x93e81e;_0xecd4aa=!![],_0x33bc08={'x':_0x1ab3b7[_0x15b33a(0x1d1)],'y':_0x1ab3b7[_0x15b33a(0xea)]};}),document[_0x93e81e(0x185)](_0x93e81e(0x184),()=>{_0xecd4aa=![];}),_0xb68935[_0x93e81e(0x185)](_0x93e81e(0xb4),_0x21fb8a=>{const _0x2ba4b7=_0x93e81e;if(_0xecd4aa&&magicGroup){const _0x55f9db=_0x21fb8a[_0x2ba4b7(0x1d1)]-_0x33bc08['x'],_0x80be8e=_0x21fb8a[_0x2ba4b7(0xea)]-_0x33bc08['y'];magicGroup[_0x2ba4b7(0xfe)]['y']+=_0x55f9db*0.005,magicGroup['rotation']['x']+=_0x80be8e*0.005,_0x33bc08={'x':_0x21fb8a[_0x2ba4b7(0x1d1)],'y':_0x21fb8a[_0x2ba4b7(0xea)]};}}),_0xb68935[_0x93e81e(0x185)]('wheel',_0xea996=>{const _0x326cea=_0x93e81e;camera[_0x326cea(0x1ad)]['z']+=_0xea996['deltaY']*0.01,camera[_0x326cea(0x1ad)]['z']=Math[_0x326cea(0x1de)](0x5,Math[_0x326cea(0x198)](camera['position']['z'],0x28));}),_0xb68935[_0x93e81e(0x185)]('touchstart',_0xf04c28=>{const _0x17a4c3=_0x93e81e;if(_0xf04c28[_0x17a4c3(0xed)]['length']===0x1)_0xecd4aa=!![],_0x33bc08={'x':_0xf04c28['touches'][0x0][_0x17a4c3(0x1d1)],'y':_0xf04c28[_0x17a4c3(0xed)][0x0][_0x17a4c3(0xea)]};else{if(_0xf04c28['touches']['length']===0x2){const _0x89690e=_0xf04c28['touches'][0x0][_0x17a4c3(0x1d1)]-_0xf04c28[_0x17a4c3(0xed)][0x1][_0x17a4c3(0x1d1)],_0x50386e=_0xf04c28['touches'][0x0][_0x17a4c3(0xea)]-_0xf04c28['touches'][0x1][_0x17a4c3(0xea)];_0x30dc31=Math[_0x17a4c3(0xf2)](_0x89690e*_0x89690e+_0x50386e*_0x50386e);}}},{'passive':![]}),document['addEventListener'](_0x93e81e(0xc3),()=>{_0xecd4aa=![],_0x30dc31=0x0;}),_0xb68935[_0x93e81e(0x185)](_0x93e81e(0xaa),_0x4286e5=>{const _0x3b5e33=_0x93e81e;_0x4286e5['preventDefault']();if(magicGroup){if(_0x4286e5['touches'][_0x3b5e33(0x128)]===0x1&&_0xecd4aa){const _0x2de343=_0x4286e5[_0x3b5e33(0xed)][0x0][_0x3b5e33(0x1d1)]-_0x33bc08['x'],_0x4fc3f4=_0x4286e5[_0x3b5e33(0xed)][0x0][_0x3b5e33(0xea)]-_0x33bc08['y'];magicGroup[_0x3b5e33(0xfe)]['y']+=_0x2de343*0.005,magicGroup[_0x3b5e33(0xfe)]['x']+=_0x4fc3f4*0.005,_0x33bc08={'x':_0x4286e5[_0x3b5e33(0xed)][0x0][_0x3b5e33(0x1d1)],'y':_0x4286e5[_0x3b5e33(0xed)][0x0][_0x3b5e33(0xea)]};}else{if(_0x4286e5[_0x3b5e33(0xed)]['length']===0x2){const _0x32f0b4=_0x4286e5['touches'][0x0][_0x3b5e33(0x1d1)]-_0x4286e5['touches'][0x1]['clientX'],_0x5e290a=_0x4286e5[_0x3b5e33(0xed)][0x0][_0x3b5e33(0xea)]-_0x4286e5[_0x3b5e33(0xed)][0x1][_0x3b5e33(0xea)],_0x255b6c=Math[_0x3b5e33(0xf2)](_0x32f0b4*_0x32f0b4+_0x5e290a*_0x5e290a);if(_0x30dc31>0x0){const _0x132c29=_0x30dc31-_0x255b6c;camera[_0x3b5e33(0x1ad)]['z']+=_0x132c29*0.05,camera['position']['z']=Math[_0x3b5e33(0x1de)](0x5,Math[_0x3b5e33(0x198)](camera[_0x3b5e33(0x1ad)]['z'],0x28)),_0x30dc31=_0x255b6c;}}}}},{'passive':![]}),scene[_0x93e81e(0x1ca)](new THREE[(_0x93e81e(0x12e))](0x404040)),camera[_0x93e81e(0x1ca)](new THREE['PointLight'](0xffffff,0.5)),scene[_0x93e81e(0x1ca)](camera),clock=new THREE[(_0x93e81e(0x137))](),document[_0x93e81e(0xe0)](_0x93e81e(0x212))[_0x93e81e(0x20d)][_0x93e81e(0x1ca)](_0x93e81e(0x12a)),loadSavedMagics(),updateMagicCircle(),animate(),setTimeout(()=>{const _0xf1733=_0x93e81e,_0x21eefa=document[_0xf1733(0x111)]('loader');_0x21eefa&&(_0x21eefa['style'][_0xf1733(0x159)]='0',setTimeout(()=>_0x21eefa[_0xf1733(0x1a3)](),0x1f4));},0x320);}function createGlowTexture(){const _0x11d71f=_0x30f7bc,_0x8bc738=document['createElement']('canvas');_0x8bc738[_0x11d71f(0xe3)]=0x40,_0x8bc738['height']=0x40;const _0x4bac86=_0x8bc738[_0x11d71f(0x1ac)]('2d'),_0x1f7b5b=_0x4bac86[_0x11d71f(0x1d4)](0x20,0x20,0x0,0x20,0x20,0x20);_0x1f7b5b['addColorStop'](0x0,'rgba(255,\x20255,\x20255,\x201)'),_0x1f7b5b[_0x11d71f(0x150)](0.3,_0x11d71f(0x20c)),_0x1f7b5b[_0x11d71f(0x150)](0x1,_0x11d71f(0x214)),_0x4bac86[_0x11d71f(0xd1)]=_0x1f7b5b,_0x4bac86[_0x11d71f(0x1cf)](0x0,0x0,0x40,0x40);const _0x1557a4=new THREE[(_0x11d71f(0x11f))](_0x8bc738);return _0x1557a4;}function createMagicMaterial(_0x168f43,_0x230ab7,_0x273d2d){const _0x3c32c0=_0x30f7bc,_0x5caedd=new THREE[(_0x3c32c0(0xd8))](_0x168f43);let _0x5e0d55=0x0;if(attrIds[config[_0x3c32c0(0x104)]])_0x5e0d55=attrIds[config[_0x3c32c0(0x104)]];if(config[_0x3c32c0(0x104)][_0x3c32c0(0x13a)]('custom_'))_0x5e0d55=0x1;const _0x4389b5=new THREE[(_0x3c32c0(0x19a))]({'uniforms':{'uTime':{'value':0x0},'uColor':{'value':new THREE['Color'](_0x168f43)},'uOpacity':{'value':_0x273d2d},'uType':{'value':_0x5e0d55},'uActive':{'value':![]}},'vertexShader':magicVertexShader,'fragmentShader':magicFragmentShader,'transparent':!![],'side':THREE[_0x3c32c0(0x215)],'wireframe':!![],'depthWrite':![],'blending':_0x230ab7?THREE[_0x3c32c0(0x15c)]:THREE[_0x3c32c0(0x152)]});return _0x4389b5;}function createAttributeAura(_0x14a5d3,_0x46770e){const _0x2269d8=_0x30f7bc;let _0x362f0e=0x0;if(attrIds[config[_0x2269d8(0x104)]])_0x362f0e=attrIds[config['attribute']];if(config[_0x2269d8(0x104)][_0x2269d8(0x13a)](_0x2269d8(0x1f7)))_0x362f0e=0x1;const _0x30db57=new THREE[(_0x2269d8(0x19a))]({'uniforms':{'uTime':{'value':0x0},'uColor':{'value':new THREE[(_0x2269d8(0xd8))](_0x14a5d3)},'uOpacity':{'value':_0x46770e?0.3:0.6},'uType':{'value':_0x362f0e},'uActive':{'value':![]}},'vertexShader':magicVertexShader,'fragmentShader':auraFragmentShader,'transparent':!![],'side':THREE[_0x2269d8(0x215)],'depthWrite':![],'blending':THREE[_0x2269d8(0x152)]});_0x46770e&&(_0x30db57[_0x2269d8(0x1da)]=THREE['NormalBlending'],_0x30db57['uniforms'][_0x2269d8(0x1e3)][_0x2269d8(0x155)]=0.1);const _0x3f4981=new THREE[(_0x2269d8(0x1a4))](0x14,0x14),_0x2dea0b=new THREE[(_0x2269d8(0x10b))](_0x3f4981,_0x30db57);return _0x2dea0b[_0x2269d8(0x1ad)]['z']=-0x2,_0x2dea0b;}function updateMagicCircle(){const _0x4d05b5=_0x30f7bc;if(!scene)return;const _0x54c5dd=config[_0x4d05b5(0x192)]===_0x4d05b5(0x1c0),_0x37cb36=currentAttributes[config['attribute']],_0x5eb1c2=config[_0x4d05b5(0x104)]===_0x4d05b5(0x167),_0x513b33=config[_0x4d05b5(0x104)]===_0x4d05b5(0x132);_0x54c5dd?(scene[_0x4d05b5(0x16f)]=new THREE[(_0x4d05b5(0xd8))](0xffffff),scene[_0x4d05b5(0x15e)]=null,bloomPass[_0x4d05b5(0x206)]=config[_0x4d05b5(0x1fe)]?0.05:0x0,document[_0x4d05b5(0x111)]('main-canvas-area')[_0x4d05b5(0x20d)][_0x4d05b5(0x1a3)](_0x4d05b5(0xfc)),document[_0x4d05b5(0x111)](_0x4d05b5(0xf4))[_0x4d05b5(0x20d)][_0x4d05b5(0x1ca)](_0x4d05b5(0x146)),document[_0x4d05b5(0x111)](_0x4d05b5(0x117))['style'][_0x4d05b5(0x120)]='#000000',document[_0x4d05b5(0x111)](_0x4d05b5(0x205))[_0x4d05b5(0xec)]['color']='#333333'):(scene[_0x4d05b5(0x16f)]=new THREE['Color'](0x50505),scene[_0x4d05b5(0x15e)]=new THREE[(_0x4d05b5(0x172))](0x50505,0.02),bloomPass[_0x4d05b5(0x206)]=config[_0x4d05b5(0x1fe)]?1.8:1.2,bloomPass[_0x4d05b5(0x1f6)]=0.1,bloomPass[_0x4d05b5(0x1e1)]=0.7,document[_0x4d05b5(0x111)](_0x4d05b5(0xf4))[_0x4d05b5(0x20d)][_0x4d05b5(0x1a3)](_0x4d05b5(0x146)),document[_0x4d05b5(0x111)](_0x4d05b5(0xf4))[_0x4d05b5(0x20d)][_0x4d05b5(0x1ca)]('bg-black'),document[_0x4d05b5(0x111)](_0x4d05b5(0x117))[_0x4d05b5(0xec)][_0x4d05b5(0x120)]='#'+_0x37cb36[_0x4d05b5(0x194)][_0x4d05b5(0x208)](0x10),document[_0x4d05b5(0x111)](_0x4d05b5(0x205))[_0x4d05b5(0xec)][_0x4d05b5(0x120)]='#aaaaaa');const _0x59d4ef=document[_0x4d05b5(0x111)](_0x4d05b5(0x117));_0x59d4ef[_0x4d05b5(0x100)]=_0x37cb36[_0x4d05b5(0x103)][_0x4d05b5(0x196)]()+'\x20CIRCLE';if(config[_0x4d05b5(0x104)]['startsWith'](_0x4d05b5(0x1f7))){document[_0x4d05b5(0x111)](_0x4d05b5(0x207))['classList'][_0x4d05b5(0x1ca)](_0x4d05b5(0xd0)),document['getElementById'](_0x4d05b5(0x12c))[_0x4d05b5(0x20d)][_0x4d05b5(0x1a3)](_0x4d05b5(0xd0)),document[_0x4d05b5(0x111)](_0x4d05b5(0xde))[_0x4d05b5(0x100)]=_0x37cb36['name'],document['getElementById'](_0x4d05b5(0xde))[_0x4d05b5(0xec)][_0x4d05b5(0x120)]='#'+_0x37cb36[_0x4d05b5(0x1c2)][_0x4d05b5(0x208)](0x10);const _0x10b34f=_0x37cb36[_0x4d05b5(0x1af)]&&_0x37cb36[_0x4d05b5(0x1af)][0x0]?_0x37cb36[_0x4d05b5(0x1af)][0x0]:_0x37cb36[_0x4d05b5(0x18d)];document[_0x4d05b5(0x111)](_0x4d05b5(0x209))['innerText']=_0x10b34f,document[_0x4d05b5(0x111)](_0x4d05b5(0x1fa))[_0x4d05b5(0x100)]=_0x37cb36[_0x4d05b5(0x123)]||_0x4d05b5(0x1ae);}else document['getElementById'](_0x4d05b5(0x207))[_0x4d05b5(0x20d)][_0x4d05b5(0x1a3)](_0x4d05b5(0xd0)),document[_0x4d05b5(0x111)](_0x4d05b5(0x12c))[_0x4d05b5(0x20d)][_0x4d05b5(0x1ca)]('hidden');const _0x2615b0=document[_0x4d05b5(0x111)]('activeLevelInfo');if(indicatorTimer)clearTimeout(indicatorTimer);let _0x441faa='';if(_0x37cb36['spells']){const _0x3a7092=Math[_0x4d05b5(0x198)](config[_0x4d05b5(0x148)],_0x37cb36[_0x4d05b5(0x1af)][_0x4d05b5(0x128)])-0x1;_0x441faa=_0x37cb36[_0x4d05b5(0x1af)][_0x3a7092];}else _0x441faa=_0x37cb36[_0x4d05b5(0x18d)]||'';const _0xb4568b=_0x441faa[_0x4d05b5(0xd3)]('\x20');let _0x350da8=_0xb4568b[_0x4d05b5(0x128)]>0x2?_0xb4568b['slice'](-0x2)['join']('\x20'):_0x441faa;_0x2615b0[_0x4d05b5(0x100)]='Lv.'+config[_0x4d05b5(0x148)]+_0x4d05b5(0x116)+_0x350da8,_0x2615b0['style'][_0x4d05b5(0x159)]=0x1,indicatorTimer=setTimeout(()=>{const _0x11d8eb=_0x4d05b5;_0x2615b0['style'][_0x11d8eb(0x159)]=0x0;},0x1770);magicGroup&&(scene[_0x4d05b5(0x1a3)](magicGroup),magicGroup[_0x4d05b5(0x127)](_0x40c09d=>{const _0x185b5f=_0x4d05b5;if(_0x40c09d[_0x185b5f(0xeb)])_0x40c09d['geometry'][_0x185b5f(0xd6)]();if(_0x40c09d[_0x185b5f(0xcb)]){if(Array[_0x185b5f(0x1bd)](_0x40c09d['material']))_0x40c09d[_0x185b5f(0xcb)][_0x185b5f(0x164)](_0x45f3a3=>_0x45f3a3[_0x185b5f(0xd6)]());else _0x40c09d[_0x185b5f(0xcb)][_0x185b5f(0xd6)]();}}));magicGroup=new THREE[(_0x4d05b5(0x1c4))](),scene['add'](magicGroup);const _0xe45b8=_0x54c5dd?0x0:_0x37cb36[_0x4d05b5(0x194)],_0x371b33=_0x54c5dd?0xdddddd:_0x37cb36[_0x4d05b5(0x1c2)],_0x52af95=config[_0x4d05b5(0x1fe)]?0x2:0x1,_0x4fa81c=_0x54c5dd?config[_0x4d05b5(0x1fe)]?0.7:0.9:config[_0x4d05b5(0x1fe)]?0.6:0.6,_0x134e20=createMagicMaterial(_0xe45b8,_0x54c5dd,_0x4fa81c);activeShaderMat=_0x134e20;_0x54c5dd&&config[_0x4d05b5(0x1fe)]&&(_0x134e20['uniforms'][_0x4d05b5(0x16e)][_0x4d05b5(0x155)]['setHex'](0x0),_0x134e20[_0x4d05b5(0x183)][_0x4d05b5(0x1e3)][_0x4d05b5(0x155)]=0.8);const _0x308c88=new THREE['MeshBasicMaterial']({'color':_0x371b33,'transparent':!![],'opacity':_0x54c5dd?0.05:0.12,'side':THREE['DoubleSide'],'blending':_0x54c5dd?THREE[_0x4d05b5(0x15c)]:THREE['AdditiveBlending'],'depthWrite':![]}),_0x5a05a6=createAttributeAura(_0x37cb36[_0x4d05b5(0x194)],_0x54c5dd);magicGroup[_0x4d05b5(0x1ca)](_0x5a05a6),auraShaderMat=_0x5a05a6[_0x4d05b5(0xcb)];const _0x336cb5=config[_0x4d05b5(0x12f)]===_0x4d05b5(0x19d)||config[_0x4d05b5(0x12f)]===_0x4d05b5(0x1d8),_0x23b48e=config[_0x4d05b5(0x12f)]===_0x4d05b5(0x1d8);for(let _0x3f9beb=0x1;_0x3f9beb<=config[_0x4d05b5(0x148)];_0x3f9beb++){let _0x1528ba='';if(_0x37cb36[_0x4d05b5(0x1af)]&&Array[_0x4d05b5(0x1bd)](_0x37cb36[_0x4d05b5(0x1af)])){const _0x30c9cb=Math[_0x4d05b5(0x198)](_0x3f9beb,_0x37cb36['spells'][_0x4d05b5(0x128)])-0x1;_0x1528ba=_0x37cb36[_0x4d05b5(0x1af)][_0x30c9cb];}else _0x1528ba=_0x37cb36[_0x4d05b5(0x18d)]||_0x4d05b5(0x11a);let _0x24fe5e=_0x1528ba;if(config[_0x4d05b5(0x12f)]===_0x4d05b5(0x199))_0x24fe5e=toGreek(_0x24fe5e);else{if(config[_0x4d05b5(0x12f)]===_0x4d05b5(0x19d))_0x24fe5e=toRunes(_0x24fe5e);else{if(config[_0x4d05b5(0x12f)]==='avestorg')_0x24fe5e=toHebrew(_0x24fe5e);}}const _0x50b8e3=_0x3f9beb*1.6,_0x501317=new THREE[(_0x4d05b5(0x1c4))](),_0x17fe06=_0x5eb1c2?_0x3f9beb%0x2===0x0?-0x1:0x1:_0x3f9beb%0x2===0x0?0x1:-0x1,_0x2f5e5a=Math[_0x4d05b5(0x1ee)]()*0.3+0.1;_0x501317[_0x4d05b5(0xe8)]={'rotSpeed':_0x17fe06*(_0x5eb1c2?_0x2f5e5a*1.5:_0x2f5e5a),'isAnti':_0x5eb1c2};if(_0x336cb5){if(_0x23b48e){const _0x4a90a4=[],_0x5b131b=0x80;for(let _0x1009c3=0x0;_0x1009c3<=_0x5b131b;_0x1009c3++){const _0x333431=_0x1009c3/_0x5b131b*Math['PI']*0x2,_0x5d76d6=Math[_0x4d05b5(0x1e7)](_0x333431*0x3)*0.2;_0x4a90a4[_0x4d05b5(0x107)](new THREE[(_0x4d05b5(0x1b2))](Math[_0x4d05b5(0xae)](_0x333431)*_0x50b8e3,Math[_0x4d05b5(0x1e7)](_0x333431)*_0x50b8e3,_0x5d76d6));}const _0x1c608a=new THREE[(_0x4d05b5(0x187))](_0x4a90a4);_0x1c608a[_0x4d05b5(0xf7)]=!![];const _0x218eb7=new THREE[(_0x4d05b5(0x1aa))](_0x1c608a,0x40,0.02,0x4,!![]),_0x204047=new THREE[(_0x4d05b5(0x10b))](_0x218eb7,_0x134e20);_0x204047[_0x4d05b5(0xfe)][_0x4d05b5(0x12d)](Math[_0x4d05b5(0x1ee)]()*Math['PI'],Math['random']()*Math['PI'],Math[_0x4d05b5(0x1ee)]()*Math['PI']),_0x501317['add'](_0x204047);}else{const _0x4a4108=new THREE['TorusGeometry'](_0x50b8e3,0.05,0x4,0x80*_0x52af95),_0x336cea=new THREE[(_0x4d05b5(0x10b))](_0x4a4108,_0x134e20);if(_0x3f9beb===0x1)_0x336cea[_0x4d05b5(0xfe)]['x']=Math['PI']/0x2;else{if(_0x3f9beb===0x2)_0x336cea[_0x4d05b5(0xfe)]['y']=Math['PI']/0x2;else{const _0x1d3ee7=Math[_0x4d05b5(0xf3)](-0x1+0x2*_0x3f9beb/config[_0x4d05b5(0x148)]),_0x10444b=Math[_0x4d05b5(0xf2)](config[_0x4d05b5(0x148)]*Math['PI'])*_0x1d3ee7;_0x336cea[_0x4d05b5(0xfe)][_0x4d05b5(0x12d)](_0x1d3ee7,_0x10444b,0x0);}}if(config[_0x4d05b5(0x12f)]===_0x4d05b5(0x19d)){const _0x107e20=0xc;for(let _0x3be46b=0x0;_0x3be46b<_0x107e20;_0x3be46b++){const _0x3f50e7=_0x3be46b/_0x107e20*Math['PI']*0x2,_0x5881d3=new THREE[(_0x4d05b5(0x10b))](new THREE[(_0x4d05b5(0xba))](0.2,0.1,0.05),_0x134e20);_0x5881d3[_0x4d05b5(0x1ad)][_0x4d05b5(0x12d)](Math[_0x4d05b5(0xae)](_0x3f50e7)*_0x50b8e3,Math['sin'](_0x3f50e7)*_0x50b8e3,0x0),_0x5881d3['rotation']['z']=_0x3f50e7,_0x336cea['add'](_0x5881d3);}}_0x5eb1c2&&(_0x336cea[_0x4d05b5(0xb8)][_0x4d05b5(0x12d)](0x1,0.95,1.05),_0x336cea[_0x4d05b5(0xfe)]['x']+=Math[_0x4d05b5(0x1ee)]()*0.5),_0x501317[_0x4d05b5(0x1ca)](_0x336cea);}const _0x582e0e=_0x37cb36[_0x4d05b5(0x133)],_0xdca330=_0x50b8e3*1.1,_0x524dfa=createAttributeShape(_0x582e0e,_0xdca330,_0x134e20,config[_0x4d05b5(0x104)],!![],_0x54c5dd);_0x524dfa[_0x4d05b5(0x151)](new THREE[(_0x4d05b5(0x1b2))](Math['random'](),Math[_0x4d05b5(0x1ee)](),Math['random']())),_0x501317['add'](_0x524dfa);if(config[_0x4d05b5(0xf0)])addPlanetSystem(_0x501317,_0x50b8e3,_0x3f9beb);if(_0x3f9beb%0x2!==0x0){let _0x27330d=_0x50b8e3*0.95;if(_0x3f9beb===0x5)_0x27330d=_0x50b8e3*0.98;const _0x235737=createSpellRing(_0x27330d,_0xe45b8,config[_0x4d05b5(0x12f)],_0x54c5dd,_0x24fe5e);if(_0x23b48e)_0x235737[_0x4d05b5(0xfe)][_0x4d05b5(0x12d)](Math[_0x4d05b5(0x1ee)]()*Math['PI'],Math[_0x4d05b5(0x1ee)]()*Math['PI'],0x0);else{if(_0x501317[_0x4d05b5(0xc1)][0x0])_0x235737[_0x4d05b5(0xfe)][_0x4d05b5(0x1d2)](_0x501317[_0x4d05b5(0xc1)][0x0][_0x4d05b5(0xfe)]);}_0x501317[_0x4d05b5(0x1ca)](_0x235737);}else{const _0x531ebd=createGeometricStructure(_0x50b8e3,_0xe45b8,config[_0x4d05b5(0x104)],!![],_0x54c5dd,_0x3f9beb);if(_0x23b48e)_0x531ebd[_0x4d05b5(0xfe)]['set'](Math[_0x4d05b5(0x1ee)]()*Math['PI'],Math['random']()*Math['PI'],0x0);else{if(_0x501317['children'][0x0])_0x531ebd[_0x4d05b5(0xfe)]['copy'](_0x501317[_0x4d05b5(0xc1)][0x0][_0x4d05b5(0xfe)]);}_0x501317[_0x4d05b5(0x1ca)](_0x531ebd);}}else{const _0x3a1910=new THREE['RingGeometry'](_0x50b8e3-0.03,_0x50b8e3+0.03,0x80*_0x52af95),_0x264610=new THREE[(_0x4d05b5(0x10b))](_0x3a1910,_0x134e20);_0x501317[_0x4d05b5(0x1ca)](_0x264610);if(_0x3f9beb>0x1||_0x513b33){const _0x2e6ae4=_0x37cb36[_0x4d05b5(0x133)],_0x465492=createAttributeShape(_0x2e6ae4,_0x50b8e3-0.2,_0x134e20,config[_0x4d05b5(0x104)],![],_0x54c5dd);if(config[_0x4d05b5(0x104)]===_0x4d05b5(0xe9))_0x465492['rotation']['z']=Math['PI'];if(config['attribute']==='wind'||config[_0x4d05b5(0x104)]===_0x4d05b5(0x217))_0x465492[_0x4d05b5(0xfe)]['z']=-Math['PI']/0x2;_0x501317[_0x4d05b5(0x1ca)](_0x465492);}if(config[_0x4d05b5(0x12f)]===_0x4d05b5(0x11d)){const _0x4c410b=0x24*_0x52af95;for(let _0x87dea5=0x0;_0x87dea5<_0x4c410b;_0x87dea5++){const _0x566f55=_0x87dea5/_0x4c410b*Math['PI']*0x2,_0x586beb=new THREE[(_0x4d05b5(0x1a4))](0.1,0.02),_0x4bd0e7=new THREE[(_0x4d05b5(0x10b))](_0x586beb,_0x134e20);_0x4bd0e7['position'][_0x4d05b5(0x12d)](Math[_0x4d05b5(0xae)](_0x566f55)*_0x50b8e3,Math[_0x4d05b5(0x1e7)](_0x566f55)*_0x50b8e3,0x0),_0x4bd0e7[_0x4d05b5(0xfe)]['z']=_0x566f55,_0x501317['add'](_0x4bd0e7);}}if(config[_0x4d05b5(0xf0)])addPlanetSystem(_0x501317,_0x50b8e3,_0x3f9beb);if(_0x3f9beb%0x2!==0x0){let _0xffc94=_0x50b8e3*0.9;if(_0x3f9beb===0x5)_0xffc94=_0x50b8e3*0.96;const _0x572aa4=createSpellRing(_0xffc94,_0xe45b8,config['type'],_0x54c5dd,_0x24fe5e);_0x501317[_0x4d05b5(0x1ca)](_0x572aa4);}else{const _0x11f985=createGeometricStructure(_0x50b8e3,_0xe45b8,config[_0x4d05b5(0x104)],![],_0x54c5dd,_0x3f9beb);_0x501317['add'](_0x11f985);}}magicGroup['add'](_0x501317);}if(_0x336cb5){const _0x4ec9b3=0x1;let _0x53af8c=_0x37cb36[_0x4d05b5(0x18b)]||_0x4d05b5(0x1bb);const _0x3138b1=createMerkaba(_0x4ec9b3,_0x134e20,_0x308c88,_0x5eb1c2,_0x513b33,_0x53af8c);if(_0x23b48e)_0x3138b1[_0x4d05b5(0xe8)][_0x4d05b5(0xc9)]=!![];magicGroup[_0x4d05b5(0x1ca)](_0x3138b1);if(config[_0x4d05b5(0x148)]>=0x4){const _0x13544e=0x4,_0x270a28=createLevel4Structure(_0x13544e,_0x134e20,config['type']);_0x270a28[_0x4d05b5(0xe8)][_0x4d05b5(0xc9)]=!![],magicGroup[_0x4d05b5(0x1ca)](_0x270a28);}if(config[_0x4d05b5(0x148)]===0x6){const _0x3b31e2=1.6*0x6*1.2,_0x47b722=createMerkaba(_0x3b31e2,_0x134e20,_0x308c88,_0x5eb1c2,_0x513b33,_0x53af8c);_0x47b722['userData'][_0x4d05b5(0xc9)]=!![],_0x47b722['children'][_0x4d05b5(0x164)](_0x377778=>{const _0x486249=_0x4d05b5;_0x377778[_0x486249(0xc1)][_0x486249(0x164)](_0x381780=>{const _0x152c4a=_0x486249;_0x381780[_0x152c4a(0xcb)]===_0x134e20&&(_0x381780[_0x152c4a(0xcb)]=_0x134e20[_0x152c4a(0x144)](),_0x381780[_0x152c4a(0xcb)][_0x152c4a(0x183)]['uOpacity'][_0x152c4a(0x155)]*=0.5),_0x381780[_0x152c4a(0xcb)]===_0x308c88&&(_0x381780['material']=_0x308c88[_0x152c4a(0x144)](),_0x381780[_0x152c4a(0xcb)][_0x152c4a(0x159)]*=0.3);});}),magicGroup[_0x4d05b5(0x1ca)](_0x47b722);}}else{const _0x104b6e=new THREE['Group'](),_0x578564=new THREE[(_0x4d05b5(0x10b))](new THREE[(_0x4d05b5(0x1e0))](0.65,0.7,0x40),_0x134e20);_0x104b6e[_0x4d05b5(0x1ca)](_0x578564);const _0x2c1073=createAttributeShape(_0x37cb36[_0x4d05b5(0x133)],0.7,_0x134e20,config[_0x4d05b5(0x104)],![],_0x54c5dd);if(config[_0x4d05b5(0x104)]===_0x4d05b5(0xe9))_0x2c1073[_0x4d05b5(0xfe)]['z']=Math['PI'];if(config[_0x4d05b5(0x104)]==='wind')_0x2c1073['rotation']['z']=-Math['PI']/0x2;_0x104b6e[_0x4d05b5(0x1ca)](_0x2c1073),magicGroup[_0x4d05b5(0x1ca)](_0x104b6e);}createParticles(_0x37cb36[_0x4d05b5(0x1c2)],_0x5eb1c2,_0x54c5dd);}function createLevel4Structure(_0x5235bc,_0x5cc215,_0x5752f4){const _0x2fdf01=_0x30f7bc,_0x119815=new THREE[(_0x2fdf01(0x1c4))]();if(_0x5752f4===_0x2fdf01(0x19d)){const _0x39a72b=new THREE[(_0x2fdf01(0x1d3))](_0x5235bc,0x0),_0xf616f3=new THREE['Mesh'](_0x39a72b,_0x5cc215);_0x119815[_0x2fdf01(0x1ca)](_0xf616f3);const _0x965615=new THREE['BoxGeometry'](_0x5235bc*1.2,_0x5235bc*1.2,_0x5235bc*1.2),_0x4f9d9a=new THREE[(_0x2fdf01(0x10b))](_0x965615,_0x5cc215);_0x4f9d9a['rotation']['y']=Math['PI']/0x4,_0x119815[_0x2fdf01(0x1ca)](_0x4f9d9a);const _0x4d13ea=new THREE[(_0x2fdf01(0xe1))](_0x5235bc*1.4,0.1,0x4,0x3c),_0x691545=new THREE[(_0x2fdf01(0x10b))](_0x4d13ea,_0x5cc215);_0x691545[_0x2fdf01(0xfe)]['x']=Math['PI']/0x2,_0x119815[_0x2fdf01(0x1ca)](_0x691545);const _0x144eb7=_0x691545['clone']();_0x144eb7['rotation'][_0x2fdf01(0x12d)](0x0,Math['PI']/0x2,0x0),_0x144eb7[_0x2fdf01(0xb8)]['setScalar'](0.9),_0x119815[_0x2fdf01(0x1ca)](_0x144eb7);}else{const _0x4030aa=new THREE[(_0x2fdf01(0x1a2))](_0x5235bc,0x0),_0x5c645d=new THREE[(_0x2fdf01(0x10b))](_0x4030aa,_0x5cc215);_0x119815[_0x2fdf01(0x1ca)](_0x5c645d);const _0x86e8cf=new THREE[(_0x2fdf01(0x1df))](_0x5235bc*1.2,0x10,0x8),_0x844d81=new THREE['Line'](new THREE[(_0x2fdf01(0x10a))](_0x86e8cf),_0x5cc215);_0x119815[_0x2fdf01(0x1ca)](_0x844d81);const _0x3cbc93=new THREE[(_0x2fdf01(0x18c))](_0x5235bc*0.8,0.05,0x64,0x10),_0xb6ad15=new THREE[(_0x2fdf01(0x10b))](_0x3cbc93,_0x5cc215);_0x119815[_0x2fdf01(0x1ca)](_0xb6ad15);}return _0x119815;}function _0xc341(_0x5aa3a8,_0x1d6018){_0x5aa3a8=_0x5aa3a8-0xa6;const _0x4922a0=_0x4922();let _0xc34194=_0x4922a0[_0x5aa3a8];return _0xc34194;}function createGeometricStructure(_0x357388,_0x236d83,_0xc068cd,_0x48d6c5,_0xdf5063,_0x38fd6e){const _0x84c3a4=_0x30f7bc,_0x1691ba=new THREE['Group'](),_0x738912=createMagicMaterial(_0x236d83,_0xdf5063,_0xdf5063?0.7:0.6),_0x7394d6=new THREE[(_0x84c3a4(0x13e))]({'color':_0x236d83,'side':THREE[_0x84c3a4(0x215)],'transparent':!![],'opacity':_0xdf5063?0.1:0.3});!_0xdf5063&&(_0x738912[_0x84c3a4(0x1da)]=THREE[_0x84c3a4(0x152)],_0x738912['uniforms'][_0x84c3a4(0x1e3)][_0x84c3a4(0x155)]=0.5);const _0x187864=0x80,_0x1ca38e=_0x357388;if(_0x48d6c5)_0x1691ba[_0x84c3a4(0x1ca)](new THREE['Mesh'](new THREE[(_0x84c3a4(0xe1))](_0x1ca38e,0.015,0x3,_0x187864),_0x738912));else _0x1691ba[_0x84c3a4(0x1ca)](new THREE[(_0x84c3a4(0x10b))](new THREE[(_0x84c3a4(0x1e0))](_0x1ca38e,_0x1ca38e+0.03,_0x187864),_0x738912));let _0x532180=0x3;const _0x14d8ca=currentAttributes[_0xc068cd]||defaultAttributes[_0xc068cd];if(_0x14d8ca)_0x532180=_0x14d8ca[_0x84c3a4(0x133)];const _0x16f379=_0x38fd6e===0x2?_0x357388:_0x357388*1.15,_0x398a3d=_0x38fd6e===0x2?_0x357388*0.12:_0x357388*0.15;if(_0xc068cd===_0x84c3a4(0xe9)){const _0x4f6629=[];for(let _0x299f2=0x0;_0x299f2<=_0x532180;_0x299f2++){const _0x3a1ddb=_0x299f2/_0x532180*Math['PI']*0x2-Math['PI']/0x2;_0x4f6629[_0x84c3a4(0x107)](new THREE[(_0x84c3a4(0x1b2))](Math[_0x84c3a4(0xae)](_0x3a1ddb)*_0x16f379,Math[_0x84c3a4(0x1e7)](_0x3a1ddb)*_0x16f379,0x0));}_0x1691ba[_0x84c3a4(0x1ca)](new THREE['Line'](new THREE[(_0x84c3a4(0xda))]()[_0x84c3a4(0x1be)](_0x4f6629),_0x738912));for(let _0x5d0c4e=0x0;_0x5d0c4e<_0x532180;_0x5d0c4e++){const _0x174e7f=_0x5d0c4e/_0x532180*Math['PI']*0x2-Math['PI']/0x2,_0x13d05b=Math[_0x84c3a4(0xae)](_0x174e7f)*_0x16f379,_0x36d66a=Math['sin'](_0x174e7f)*_0x16f379;if(_0x48d6c5){const _0x5dc2ba=new THREE[(_0x84c3a4(0x10b))](new THREE[(_0x84c3a4(0xe1))](_0x398a3d*0.4,0.01,0x3,0x10),_0x738912);_0x5dc2ba[_0x84c3a4(0x1ad)]['set'](_0x13d05b,_0x36d66a,0x0),_0x1691ba['add'](_0x5dc2ba);}else{const _0x514400=new THREE[(_0x84c3a4(0x10b))](new THREE['RingGeometry'](_0x398a3d*0.3,_0x398a3d*0.5,0x10),_0x738912);_0x514400['position'][_0x84c3a4(0x12d)](_0x13d05b,_0x36d66a,0x0),_0x1691ba['add'](_0x514400);}}}else{if(_0xc068cd===_0x84c3a4(0x161)){const _0x3a7677=_0x357388*0.95,_0x1b2d64=[];for(let _0x565af6=0x0;_0x565af6<=_0x532180;_0x565af6++){const _0x273c8f=_0x565af6/_0x532180*Math['PI']*0x2;_0x1b2d64['push'](new THREE[(_0x84c3a4(0x1b2))](Math[_0x84c3a4(0xae)](_0x273c8f)*_0x3a7677,Math['sin'](_0x273c8f)*_0x3a7677,0x0));}_0x1691ba[_0x84c3a4(0x1ca)](new THREE['Line'](new THREE[(_0x84c3a4(0xda))]()[_0x84c3a4(0x1be)](_0x1b2d64),_0x738912));for(let _0x2bbf10=0x0;_0x2bbf10<_0x532180;_0x2bbf10++){const _0x352dd7=_0x2bbf10/_0x532180*Math['PI']*0x2,_0x245cf9=Math[_0x84c3a4(0xae)](_0x352dd7)*_0x3a7677,_0x472a08=Math[_0x84c3a4(0x1e7)](_0x352dd7)*_0x3a7677,_0x5a23ea=new THREE[(_0x84c3a4(0x10b))](new THREE[(_0x84c3a4(0x191))](0.08,0x8),_0x7394d6);_0x5a23ea[_0x84c3a4(0x1ad)][_0x84c3a4(0x12d)](_0x245cf9,_0x472a08,0x0),_0x1691ba[_0x84c3a4(0x1ca)](_0x5a23ea);}}else{if(_0xc068cd===_0x84c3a4(0xfb)||_0xc068cd==='ice')for(let _0x4fccff=0x0;_0x4fccff<_0x532180;_0x4fccff++){const _0x3e8211=_0x4fccff/_0x532180*Math['PI']*0x2,_0x4b42f3=Math[_0x84c3a4(0xae)](_0x3e8211)*(_0x357388*0.5),_0x1757b8=Math[_0x84c3a4(0x1e7)](_0x3e8211)*(_0x357388*0.5),_0x3bcd58=_0x357388*0.55;if(_0x48d6c5){const _0x5acea7=new THREE[(_0x84c3a4(0x10b))](new THREE[(_0x84c3a4(0xe1))](_0x3bcd58,0.01,0x3,0x40),_0x738912);_0x5acea7[_0x84c3a4(0x1ad)][_0x84c3a4(0x12d)](_0x4b42f3,_0x1757b8,0x0),_0x1691ba[_0x84c3a4(0x1ca)](_0x5acea7);}else{const _0x2ddf72=new THREE[(_0x84c3a4(0x10b))](new THREE['RingGeometry'](_0x3bcd58,_0x3bcd58+0.02,0x40),_0x738912);_0x2ddf72[_0x84c3a4(0x1ad)][_0x84c3a4(0x12d)](_0x4b42f3,_0x1757b8,0x0),_0x1691ba[_0x84c3a4(0x1ca)](_0x2ddf72);}}else{if(_0xc068cd===_0x84c3a4(0xb1)){const _0x48b111=_0x38fd6e===0x2?_0x357388:_0x357388*0x1;for(let _0x586cda=0x0;_0x586cda<_0x532180;_0x586cda++){const _0x346710=_0x586cda/_0x532180*Math['PI']*0x2+Math['PI']/0x4,_0x4bca51=Math[_0x84c3a4(0xae)](_0x346710)*_0x48b111,_0x2d368b=Math[_0x84c3a4(0x1e7)](_0x346710)*_0x48b111,_0x1b12ba=_0x357388*0.25,_0x1d7041=new THREE[(_0x84c3a4(0x129))](new THREE['BoxGeometry'](_0x1b12ba*1.5,_0x1b12ba*1.5,0.01)),_0x415b58=new THREE['LineSegments'](_0x1d7041,_0x738912);_0x415b58['position'][_0x84c3a4(0x12d)](_0x4bca51,_0x2d368b,0x0),_0x415b58['rotation']['z']=Math['PI']/0x4,_0x1691ba[_0x84c3a4(0x1ca)](_0x415b58);if(_0x48d6c5){const _0x5a4dd8=new THREE[(_0x84c3a4(0x10b))](new THREE['TorusGeometry'](_0x1b12ba*0.6,0.02,0x4,0x20),_0x738912);_0x5a4dd8[_0x84c3a4(0x1ad)][_0x84c3a4(0x12d)](_0x4bca51,_0x2d368b,0x0),_0x1691ba[_0x84c3a4(0x1ca)](_0x5a4dd8);}else{const _0x8f6a79=new THREE[(_0x84c3a4(0x10b))](new THREE[(_0x84c3a4(0x1e0))](_0x1b12ba*0.5,_0x1b12ba*0.7,0x20),_0x738912);_0x8f6a79[_0x84c3a4(0x1ad)][_0x84c3a4(0x12d)](_0x4bca51,_0x2d368b,0x0),_0x1691ba['add'](_0x8f6a79);}}}else{if(_0xc068cd===_0x84c3a4(0x142)){const _0x491956=_0x38fd6e===0x2?_0x532180:_0x532180*0x2;for(let _0x356717=0x0;_0x356717<_0x491956;_0x356717++){const _0x2a18f1=_0x356717/_0x491956*Math['PI']*0x2,_0x4b1a2b=Math['cos'](_0x2a18f1)*_0x357388,_0x5a6ea9=Math[_0x84c3a4(0x1e7)](_0x2a18f1)*_0x357388,_0x2c5e48=_0x357388*0.15;if(!_0x48d6c5){const _0x384274=new THREE[(_0x84c3a4(0x10b))](new THREE['RingGeometry'](_0x2c5e48,_0x2c5e48+0.02,0x20),_0x738912);_0x384274['position'][_0x84c3a4(0x12d)](_0x4b1a2b,_0x5a6ea9,0x0),_0x1691ba['add'](_0x384274);}else{const _0x59ea6e=new THREE[(_0x84c3a4(0x10b))](new THREE['TorusGeometry'](_0x2c5e48,0.01,0x3,0x20),_0x738912);_0x59ea6e[_0x84c3a4(0x1ad)][_0x84c3a4(0x12d)](_0x4b1a2b,_0x5a6ea9,0x0),_0x1691ba[_0x84c3a4(0x1ca)](_0x59ea6e);}}const _0x53bc3e=[];for(let _0x46db33=0x0;_0x46db33<=_0x491956;_0x46db33++){const _0x123330=_0x46db33/_0x491956*Math['PI']*0x2;_0x53bc3e['push'](new THREE[(_0x84c3a4(0x1b2))](Math['cos'](_0x123330)*_0x357388,Math[_0x84c3a4(0x1e7)](_0x123330)*_0x357388,0x0));}const _0x3e3dc1=new THREE[(_0x84c3a4(0x181))](new THREE[(_0x84c3a4(0xda))]()[_0x84c3a4(0x1be)](_0x53bc3e),_0x738912);_0x1691ba[_0x84c3a4(0x1ca)](_0x3e3dc1);}else for(let _0x17f0fc=0x0;_0x17f0fc<_0x532180;_0x17f0fc++){const _0x3697de=_0x17f0fc/_0x532180*Math['PI']*0x2,_0x8d0e1c=Math[_0x84c3a4(0xae)](_0x3697de)*_0x357388,_0x226f24=Math[_0x84c3a4(0x1e7)](_0x3697de)*_0x357388,_0x2eb329=_0x357388*0.1;if(_0x48d6c5){const _0x3277f0=new THREE['Mesh'](new THREE[(_0x84c3a4(0xe1))](_0x2eb329,0.015,0x3,0x20),_0x738912);_0x3277f0['position']['set'](_0x8d0e1c,_0x226f24,0x0),_0x1691ba['add'](_0x3277f0);}else{const _0x4fca5e=new THREE[(_0x84c3a4(0x10b))](new THREE['RingGeometry'](_0x2eb329,_0x2eb329+0.03,0x20),_0x738912);_0x4fca5e[_0x84c3a4(0x1ad)][_0x84c3a4(0x12d)](_0x8d0e1c,_0x226f24,0x0),_0x1691ba[_0x84c3a4(0x1ca)](_0x4fca5e);}}}}}}return _0x1691ba;}function addPlanetSystem(_0x35bbba,_0x2671ca,_0x6751a7){const _0x47ef97=_0x30f7bc,_0x485978=(_0x6751a7-0x1)%0x6,_0x5370c2=[0x3366cc,0xff4433,0xd4a055,0xeedd88,0x55aadd,0x33cc33],_0x523826=_0x5370c2[_0x485978],_0x4a776e=new THREE[(_0x47ef97(0x1c4))](),_0x26fa2a=Math['random']()*Math['PI']*0x2;_0x4a776e[_0x47ef97(0x1ad)][_0x47ef97(0x12d)](Math[_0x47ef97(0xae)](_0x26fa2a)*_0x2671ca,Math[_0x47ef97(0x1e7)](_0x26fa2a)*_0x2671ca,0x0);const _0x34c495=0.15+_0x6751a7*0.02,_0x10206a=new THREE['SphereGeometry'](_0x34c495,0x10,0x10),_0x2b03a0=new THREE[(_0x47ef97(0x13e))]({'color':_0x523826}),_0x2ed519=new THREE[(_0x47ef97(0x10b))](_0x10206a,_0x2b03a0);_0x4a776e[_0x47ef97(0x1ca)](_0x2ed519);if(_0x485978===0x3){const _0x5c8035=new THREE[(_0x47ef97(0x1e0))](_0x34c495*1.4,_0x34c495*2.2,0x20),_0x441ae6=new THREE['MeshBasicMaterial']({'color':0xaa9977,'side':THREE[_0x47ef97(0x215)],'transparent':!![],'opacity':0.7}),_0xb4b563=new THREE[(_0x47ef97(0x10b))](_0x5c8035,_0x441ae6);_0xb4b563[_0x47ef97(0xfe)]['x']=Math['PI']/0x3,_0x4a776e[_0x47ef97(0x1ca)](_0xb4b563);}const _0x50788b=_0x485978===0x0?0x1:_0x485978===0x1?0x2:_0x485978===0x2||_0x485978===0x3?0x3:0x0;for(let _0x8d8aff=0x0;_0x8d8aff<_0x50788b;_0x8d8aff++){const _0x296972=_0x34c495*0.3,_0x2bfc1=_0x34c495*(2.5+_0x8d8aff*1.5),_0x191480=new THREE['SphereGeometry'](_0x296972,0x8,0x8),_0x39ed6d=new THREE['MeshBasicMaterial']({'color':0xaaaaaa}),_0x13acf6=new THREE[(_0x47ef97(0x10b))](_0x191480,_0x39ed6d),_0x4eab8d=new THREE[(_0x47ef97(0x1c4))]();_0x4eab8d[_0x47ef97(0x1ca)](_0x13acf6),_0x13acf6['position']['x']=_0x2bfc1,_0x4eab8d[_0x47ef97(0xfe)]['z']=Math[_0x47ef97(0x1ee)]()*Math['PI']*0x2,_0x4eab8d['rotation']['x']=Math[_0x47ef97(0x1ee)]()*0.5,_0x4eab8d['userData']={'orbitSpeed':(Math[_0x47ef97(0x1ee)]()*0x2+0x1)*(_0x8d8aff%0x2==0x0?0x1:-0x1)},_0x4a776e['add'](_0x4eab8d);}_0x4a776e[_0x47ef97(0xe8)]={'isPlanetSystem':!![]},_0x35bbba[_0x47ef97(0x1ca)](_0x4a776e);}function createAttributeShape(_0x29202d,_0x473e4a,_0x3d5d80,_0xcd0491,_0x310d90,_0x42ec1d){const _0x2461a5=_0x30f7bc,_0x46bc4a=new THREE[(_0x2461a5(0x1c4))](),_0x59581d=currentAttributes[_0xcd0491]||defaultAttributes[_0xcd0491];if(_0xcd0491===_0x2461a5(0x132)||_0xcd0491===_0x2461a5(0x167)){const _0x326932=_0xcd0491==='anti',_0x39a181=_0x473e4a*0.33;for(let _0x74af08=0x0;_0x74af08<0x6;_0x74af08++){const _0xc4f30d=_0x74af08/0x6*Math['PI']*0x2,_0x6cff5b=_0x326932?(Math['random']()-0.5)*0.1:0x0,_0x205015=Math[_0x2461a5(0xae)](_0xc4f30d+_0x6cff5b)*_0x39a181,_0x305e41=Math[_0x2461a5(0x1e7)](_0xc4f30d+_0x6cff5b)*_0x39a181,_0x3e4d45=new THREE[(_0x2461a5(0x10b))](new THREE[(_0x2461a5(0x1e0))](_0x39a181,_0x39a181+0.02,0x40),_0x3d5d80);_0x3e4d45[_0x2461a5(0x1ad)][_0x2461a5(0x12d)](_0x205015,_0x305e41,0x0),_0x46bc4a[_0x2461a5(0x1ca)](_0x3e4d45);}const _0x3e2333=new THREE['Mesh'](new THREE[(_0x2461a5(0x1e0))](_0x39a181,_0x39a181+0.02,0x40),_0x3d5d80);_0x46bc4a[_0x2461a5(0x1ca)](_0x3e2333);const _0x3146e0=[],_0x100ecf=0xc;for(let _0x47a650=0x0;_0x47a650<=_0x100ecf*0x2;_0x47a650++){const _0x519d72=_0x47a650/(_0x100ecf*0x2)*Math['PI']*0x2,_0x276aba=_0x473e4a*(0.8+0.2*Math[_0x2461a5(0xae)](_0x100ecf/0x2*_0x519d72)),_0x33216d=_0x326932?(Math[_0x2461a5(0x1ee)]()-0.5)*0.2:0x0;_0x3146e0[_0x2461a5(0x107)](new THREE[(_0x2461a5(0x1b2))](Math[_0x2461a5(0xae)](_0x519d72)*(_0x276aba+_0x33216d),Math[_0x2461a5(0x1e7)](_0x519d72)*(_0x276aba+_0x33216d),0x0));}const _0x47acf3=new THREE[(_0x2461a5(0x181))](new THREE[(_0x2461a5(0xda))]()[_0x2461a5(0x1be)](_0x3146e0),_0x3d5d80);_0x46bc4a[_0x2461a5(0x1ca)](_0x47acf3);}else{if(_0x29202d===0x3){const _0xe40fdf=[];for(let _0x3b4f88=0x0;_0x3b4f88<=0x3;_0x3b4f88++){const _0x128275=_0x3b4f88/0x3*Math['PI']*0x2+Math['PI']/0x2;_0xe40fdf[_0x2461a5(0x107)](new THREE[(_0x2461a5(0x1b2))](Math[_0x2461a5(0xae)](_0x128275)*_0x473e4a,Math[_0x2461a5(0x1e7)](_0x128275)*_0x473e4a,0x0));}_0x46bc4a[_0x2461a5(0x1ca)](new THREE[(_0x2461a5(0x181))](new THREE[(_0x2461a5(0xda))]()['setFromPoints'](_0xe40fdf),_0x3d5d80));const _0x4a1ee6=[],_0x37f8f0=_0x473e4a*0.5;for(let _0x49f521=0x0;_0x49f521<=0x3;_0x49f521++){const _0x3b82c8=_0x49f521/0x3*Math['PI']*0x2-Math['PI']/0x2;_0x4a1ee6[_0x2461a5(0x107)](new THREE[(_0x2461a5(0x1b2))](Math[_0x2461a5(0xae)](_0x3b82c8)*_0x37f8f0,Math[_0x2461a5(0x1e7)](_0x3b82c8)*_0x37f8f0,0x0));}_0x46bc4a[_0x2461a5(0x1ca)](new THREE['Line'](new THREE[(_0x2461a5(0xda))]()[_0x2461a5(0x1be)](_0x4a1ee6),_0x3d5d80));}else{const _0x3e6692=[];for(let _0x4dabe3=0x0;_0x4dabe3<=_0x29202d;_0x4dabe3++){const _0x311eb9=_0x4dabe3/_0x29202d*Math['PI']*0x2+Math['PI']/0x2;_0x3e6692[_0x2461a5(0x107)](new THREE[(_0x2461a5(0x1b2))](Math[_0x2461a5(0xae)](_0x311eb9)*_0x473e4a,Math['sin'](_0x311eb9)*_0x473e4a,0x0));}const _0x474214=new THREE[(_0x2461a5(0xda))]()[_0x2461a5(0x1be)](_0x3e6692);let _0x91dc1b=_0x3d5d80;if((_0xcd0491===_0x2461a5(0xb1)||_0xcd0491===_0x2461a5(0x161))&&!_0x42ec1d){const _0x337877=_0x3d5d80['clone']();_0x337877[_0x2461a5(0x1da)]=THREE[_0x2461a5(0x152)],_0xcd0491===_0x2461a5(0xb1)?(_0x337877[_0x2461a5(0x183)][_0x2461a5(0x16e)]['value'][_0x2461a5(0x1d9)](0xffaa44),_0x337877[_0x2461a5(0x183)][_0x2461a5(0x1e3)][_0x2461a5(0x155)]=0x1):(_0x337877[_0x2461a5(0x183)][_0x2461a5(0x16e)]['value'][_0x2461a5(0x1d9)](0xffffcc),_0x337877[_0x2461a5(0x183)][_0x2461a5(0x1e3)]['value']=0x1),_0x91dc1b=_0x337877;}const _0x1f800f=new THREE[(_0x2461a5(0x181))](_0x474214,_0x91dc1b);_0x46bc4a['add'](_0x1f800f);}}return _0x46bc4a;}function createMerkaba(_0x2a09cc,_0x56bb77,_0x4e3c48,_0x3609c5,_0x5a338f,_0x20d999){const _0x47e73b=_0x30f7bc,_0x1d39f2=new THREE[(_0x47e73b(0x1c4))]();if(_0x20d999==='merkaba'||_0x5a338f||_0x3609c5){const _0x266925=_0x2a09cc,_0x5afb6b=new THREE[(_0x47e73b(0x18a))](_0x266925,0x0),_0x36972b=new THREE['Group'](),_0x3cde6a=new THREE[(_0x47e73b(0x10b))](_0x5afb6b,_0x56bb77),_0x1c93be=new THREE[(_0x47e73b(0x10b))](_0x5afb6b,_0x4e3c48);_0x36972b[_0x47e73b(0x1ca)](_0x3cde6a),_0x36972b[_0x47e73b(0x1ca)](_0x1c93be);const _0x33742d=new THREE[(_0x47e73b(0x1c4))](),_0x709153=new THREE[(_0x47e73b(0x10b))](_0x5afb6b,_0x56bb77),_0x5e10b7=new THREE['Mesh'](_0x5afb6b,_0x4e3c48);_0x33742d[_0x47e73b(0x1ca)](_0x709153),_0x33742d[_0x47e73b(0x1ca)](_0x5e10b7),_0x33742d['rotation']['x']=Math['PI'],_0x33742d[_0x47e73b(0xfe)]['z']=Math['PI']/0x2;if(_0x3609c5){_0x33742d['rotation']['x']+=0.2,_0x33742d[_0x47e73b(0xfe)]['y']+=0.1,_0x33742d[_0x47e73b(0xb8)][_0x47e73b(0x12d)](0.8,1.2,0.9);const _0x2dd14a=_0x56bb77['clone']();_0x2dd14a[_0x47e73b(0x183)][_0x47e73b(0x1e3)][_0x47e73b(0x155)]=0.8,_0x2dd14a[_0x47e73b(0x183)][_0x47e73b(0x16e)][_0x47e73b(0x155)][_0x47e73b(0x1d9)](0x0),_0x709153[_0x47e73b(0xcb)]=_0x2dd14a;const _0x4ca5ee=_0x4e3c48[_0x47e73b(0x144)]();_0x4ca5ee[_0x47e73b(0x120)][_0x47e73b(0x1d9)](0x330000),_0x5e10b7[_0x47e73b(0xcb)]=_0x4ca5ee;}_0x1d39f2[_0x47e73b(0x1ca)](_0x36972b),_0x1d39f2[_0x47e73b(0x1ca)](_0x33742d);}else{let _0x1e475b;if(_0x20d999===_0x47e73b(0x1b6))_0x1e475b=new THREE[(_0x47e73b(0x18a))](_0x2a09cc,0x0);else{if(_0x20d999===_0x47e73b(0x1e6))_0x1e475b=new THREE[(_0x47e73b(0xba))](_0x2a09cc,_0x2a09cc,_0x2a09cc);else{if(_0x20d999===_0x47e73b(0xb3))_0x1e475b=new THREE[(_0x47e73b(0x1a2))](_0x2a09cc,0x0);else{if(_0x20d999===_0x47e73b(0xbb))_0x1e475b=new THREE[(_0x47e73b(0x1ea))](_0x2a09cc,0x0);else{if(_0x20d999===_0x47e73b(0xc5))_0x1e475b=new THREE['TorusKnotGeometry'](_0x2a09cc*0.6,0.1,0x40,0x8);else _0x1e475b=new THREE[(_0x47e73b(0x1d3))](_0x2a09cc,0x0);}}}}const _0x3ee0a0=new THREE[(_0x47e73b(0x10b))](_0x1e475b,_0x56bb77),_0x364e02=new THREE[(_0x47e73b(0x10b))](_0x1e475b,_0x4e3c48);_0x364e02[_0x47e73b(0xb8)][_0x47e73b(0x12d)](0.85,0.85,0.85),_0x1d39f2[_0x47e73b(0x1ca)](_0x3ee0a0),_0x1d39f2[_0x47e73b(0x1ca)](_0x364e02);}return _0x1d39f2[_0x47e73b(0xe8)]={'isMerkaba':!![],'isAnti':_0x3609c5},_0x1d39f2;}function createSpellRing(_0xff3c89,_0x4e5f93,_0x49a2fc,_0x12c1a9,_0x56f40b){const _0x118095=_0x30f7bc,_0x457fbe=document[_0x118095(0x203)](_0x118095(0xb7)),_0x2fd34e=config['highPrecision']?0x800:0x400;_0x457fbe['width']=_0x2fd34e,_0x457fbe[_0x118095(0x17b)]=_0x2fd34e;const _0x48b46e=_0x457fbe[_0x118095(0x1ac)]('2d'),_0x554742=new THREE[(_0x118095(0xd8))](_0x4e5f93);_0x48b46e['fillStyle']=_0x118095(0x1dc)+_0x554742['r']*0xff+',\x20'+_0x554742['g']*0xff+',\x20'+_0x554742['b']*0xff+')';const _0x3f7db7=config[_0x118095(0x1fe)]?0x78:0x3c,_0x4070f7=_0x2fd34e/0x2,_0x289be5=_0x2fd34e*0.4;if(_0x49a2fc===_0x118095(0x199))_0x48b46e[_0x118095(0x16d)]='bold\x20'+_0x3f7db7+'px\x20\x22Noto\x20Serif\x20JP\x22,\x20serif';else{if(_0x49a2fc===_0x118095(0x11d))_0x48b46e[_0x118095(0x16d)]=_0x3f7db7*0.8+'px\x20\x22Noto\x20Sans\x20Mono\x22,\x20monospace';else{if(_0x49a2fc===_0x118095(0x19d))_0x48b46e['font']=_0x118095(0x1db)+_0x3f7db7+_0x118095(0x19b);else{if(_0x49a2fc==='avestorg')_0x48b46e[_0x118095(0x16d)]=_0x118095(0x1db)+_0x3f7db7+'px\x20\x22Noto\x20Sans\x20Hebrew\x22,\x20sans-serif';else _0x48b46e[_0x118095(0x16d)]=_0x3f7db7+_0x118095(0x139);}}}_0x48b46e[_0x118095(0x14f)]=_0x118095(0xb0),_0x48b46e['textBaseline']=_0x118095(0x200),_0x48b46e[_0x118095(0x1fb)](_0x4070f7,_0x4070f7);let _0x13cccb=_0x56f40b;const _0x1af53a=_0x49a2fc===_0x118095(0x11d)?0x50:0x28;while(_0x13cccb[_0x118095(0x128)]<_0x1af53a)_0x13cccb+=_0x56f40b;const _0x5c1498=Math['PI']*0x2/_0x13cccb[_0x118095(0x128)];for(let _0x4fb4ab=0x0;_0x4fb4ab<_0x13cccb[_0x118095(0x128)];_0x4fb4ab++){_0x48b46e[_0x118095(0x124)](),_0x48b46e[_0x118095(0x165)](_0x4fb4ab*_0x5c1498),_0x48b46e[_0x118095(0x1fb)](0x0,-_0x289be5),_0x48b46e[_0x118095(0xdb)](_0x13cccb[_0x4fb4ab],0x0,0x0),_0x48b46e[_0x118095(0x106)]();}_0x49a2fc===_0x118095(0x11d)&&(_0x48b46e[_0x118095(0x1a6)]=_0x48b46e[_0x118095(0xd1)],_0x48b46e[_0x118095(0x213)]=config['highPrecision']?0x4:0x2,_0x48b46e['beginPath'](),_0x48b46e[_0x118095(0xc0)](0x0,0x0,_0x289be5-_0x3f7db7,0x0,Math['PI']*0x2),_0x48b46e[_0x118095(0x121)](),_0x48b46e[_0x118095(0x1c5)](),_0x48b46e[_0x118095(0xc0)](0x0,0x0,_0x289be5+_0x3f7db7,0x0,Math['PI']*0x2),_0x48b46e[_0x118095(0x121)]());const _0x552ee7=new THREE[(_0x118095(0x11f))](_0x457fbe);_0x552ee7[_0x118095(0xb2)]=0x10;const _0x30088a=new THREE[(_0x118095(0x13e))]({'map':_0x552ee7,'transparent':!![],'opacity':_0x12c1a9?0x1:0.8,'side':THREE[_0x118095(0x215)],'depthWrite':![],'blending':_0x12c1a9?THREE[_0x118095(0x15c)]:THREE[_0x118095(0x152)],'color':_0x4e5f93});return new THREE[(_0x118095(0x10b))](new THREE[(_0x118095(0x1a4))](_0xff3c89*2.3,_0xff3c89*2.3),_0x30088a);}function createParticles(_0x5ad13d,_0x4d3cb7,_0x140a8b){const _0x261650=_0x30f7bc,_0x4b1f28=config['highPrecision']?_0x140a8b?0x2:0x4:0x1,_0x15819e=(config[_0x261650(0x148)]*0x96+0x64)*_0x4b1f28,_0x5c9fe3=[],_0x2b1222=[],_0x1521e2=new THREE[(_0x261650(0xda))]();for(let _0x1f5052=0x0;_0x1f5052<_0x15819e;_0x1f5052++){const _0x33cd87=Math[_0x261650(0x1ee)]()*config[_0x261650(0x148)]*2.5+0x1,_0x1da23d=Math[_0x261650(0x1ee)]()*Math['PI']*0x2,_0x22cd3c=Math['random']()*Math['PI'];let _0xf2c640,_0x78bae4,_0x1c32cd;config[_0x261650(0x1fe)]||config[_0x261650(0x12f)][_0x261650(0xfa)](_0x261650(0x1f9))||config[_0x261650(0x12f)]==='avestorg'?(_0xf2c640=_0x33cd87*Math[_0x261650(0x1e7)](_0x22cd3c)*Math[_0x261650(0xae)](_0x1da23d),_0x78bae4=_0x33cd87*Math[_0x261650(0x1e7)](_0x22cd3c)*Math['sin'](_0x1da23d),_0x1c32cd=_0x33cd87*Math[_0x261650(0xae)](_0x22cd3c)):(_0xf2c640=_0x33cd87*Math[_0x261650(0xae)](_0x1da23d),_0x78bae4=_0x33cd87*Math[_0x261650(0x1e7)](_0x1da23d),_0x1c32cd=(Math[_0x261650(0x1ee)]()-0.5)*(_0x33cd87*0.3));_0x5c9fe3[_0x261650(0x107)](_0xf2c640,_0x78bae4,_0x1c32cd);let _0x5ae73f=Math[_0x261650(0x1ee)]()*0.15+0.05;if(config[_0x261650(0x1fe)])_0x5ae73f*=0x2;_0x2b1222[_0x261650(0x107)](_0x5ae73f);}_0x1521e2[_0x261650(0x1c6)](_0x261650(0x1ad),new THREE[(_0x261650(0xd2))](_0x5c9fe3,0x3)),_0x1521e2['setAttribute'](_0x261650(0x1d7),new THREE[(_0x261650(0xd2))](_0x2b1222,0x1));let _0x1c2cb1;if(config[_0x261650(0x1fe)]){let _0xc793ec=new THREE[(_0x261650(0xd8))](_0x5ad13d),_0x149b22=0.6;if(_0x140a8b)_0xc793ec[_0x261650(0x1d9)](0x0),_0x149b22=0.15;else _0x4d3cb7&&(_0xc793ec[_0x261650(0x1d9)](0x330000),_0x149b22=0.8);_0x1c2cb1=new THREE[(_0x261650(0x105))]({'color':_0xc793ec,'size':0.1,'map':glowTexture,'transparent':!![],'opacity':_0x149b22,'blending':_0x140a8b?THREE[_0x261650(0x15c)]:THREE[_0x261650(0x152)],'depthWrite':![]});}else{const _0x52e711=_0x4d3cb7?0x220000:_0x5ad13d;_0x1c2cb1=new THREE['PointsMaterial']({'color':_0x52e711,'size':0.1,'transparent':!![],'opacity':_0x4d3cb7?0.8:0.4,'blending':THREE[_0x261650(0x152)],'depthWrite':![]});}particleSystem=new THREE[(_0x261650(0x115))](_0x1521e2,_0x1c2cb1),particleSystem[_0x261650(0xe8)]={'isAnti':_0x4d3cb7,'isHighP':config[_0x261650(0x1fe)]},magicGroup[_0x261650(0x1ca)](particleSystem);}function animate(){const _0x567174=_0x30f7bc;animationId=requestAnimationFrame(animate);const _0x4e415d=clock[_0x567174(0xcc)](),_0x1eaf56=config[_0x567174(0x134)]*_0x4e415d;if(activeShaderMat){const _0x3af870=config[_0x567174(0x134)]>0x0;activeShaderMat['uniforms'][_0x567174(0x1ed)][_0x567174(0x155)]=_0x3af870&&config[_0x567174(0x1a5)],_0x3af870&&config[_0x567174(0x1a5)]&&(activeShaderMat[_0x567174(0x183)]['uTime'][_0x567174(0x155)]+=_0x4e415d);}magicGroup&&magicGroup['children'][_0x567174(0x164)](_0x2b2de4=>{const _0x27d07b=_0x567174;if(_0x2b2de4[_0x27d07b(0x1e9)]){const _0x3d52ec=_0x2b2de4['userData'][_0x27d07b(0x19f)],_0x3c8f86=_0x2b2de4[_0x27d07b(0xe8)][_0x27d07b(0x1f4)];_0x3c8f86?(_0x2b2de4[_0x27d07b(0xfe)]['y']+=_0x1eaf56*0.1,_0x2b2de4[_0x27d07b(0xfe)]['z']+=_0x1eaf56*0.05):_0x2b2de4[_0x27d07b(0xfe)]['y']+=_0x1eaf56*(_0x3d52ec?-0.5:0.3);if(_0x3d52ec&&Math[_0x27d07b(0x1ee)]()>0.9)_0x2b2de4[_0x27d07b(0xb8)][_0x27d07b(0x1cb)](0.99+Math[_0x27d07b(0x1ee)]()*0.02);}else{if(_0x2b2de4['userData'][_0x27d07b(0xc9)]){const _0x1b7e52=_0x2b2de4[_0x27d07b(0xe8)][_0x27d07b(0x19f)];_0x2b2de4[_0x27d07b(0xfe)]['x']+=_0x1eaf56*(_0x1b7e52?-0.2:0.5),_0x2b2de4[_0x27d07b(0xfe)]['y']+=_0x1eaf56*(_0x1b7e52?-0.3:0.5);if(_0x1b7e52){if(Math[_0x27d07b(0x1ee)]()>0.95)_0x2b2de4[_0x27d07b(0x1ad)]['x']=(Math[_0x27d07b(0x1ee)]()-0.5)*0.05;else _0x2b2de4['position']['x']=0x0;}}else{if(_0x2b2de4['userData'][_0x27d07b(0x13d)]){const _0x581509=config['highPrecision']?0.8:0x1,_0x49f6ae=_0x2b2de4['userData'][_0x27d07b(0x19f)];config[_0x27d07b(0x12f)][_0x27d07b(0xfa)](_0x27d07b(0x1f9))||config['type']===_0x27d07b(0x1d8)?(_0x2b2de4[_0x27d07b(0xfe)]['x']+=_0x1eaf56*_0x2b2de4[_0x27d07b(0xe8)][_0x27d07b(0x13d)]*_0x581509,_0x2b2de4[_0x27d07b(0xfe)]['y']+=_0x1eaf56*_0x2b2de4[_0x27d07b(0xe8)][_0x27d07b(0x13d)]*0.5*_0x581509):_0x2b2de4['rotation']['z']-=_0x1eaf56*_0x2b2de4[_0x27d07b(0xe8)][_0x27d07b(0x13d)]*_0x581509;if(_0x49f6ae)_0x2b2de4[_0x27d07b(0xfe)]['x']+=Math[_0x27d07b(0x1e7)](clock['getElapsedTime']()*0x5)*0.002;_0x2b2de4[_0x27d07b(0xc1)]['forEach'](_0x4930b9=>{const _0x5e2fd8=_0x27d07b;_0x4930b9[_0x5e2fd8(0xe8)][_0x5e2fd8(0x211)]&&_0x4930b9[_0x5e2fd8(0xc1)][_0x5e2fd8(0x164)](_0x4f2569=>{const _0x1388aa=_0x5e2fd8;_0x4f2569[_0x1388aa(0xe8)]['orbitSpeed']&&(_0x4f2569[_0x1388aa(0xfe)]['z']+=_0x1eaf56*_0x4f2569[_0x1388aa(0xe8)][_0x1388aa(0xa6)]);});});}}}}),renderer[_0x567174(0x10c)](),composer[_0x567174(0x180)]();}async function generateMagicWithAI(){const _0x2e0809=_0x30f7bc,_0x543ca9=document[_0x2e0809(0x111)]('aiGenBtn'),_0x141a7c=document[_0x2e0809(0x111)]('aiDescText'),_0x13fef2=document[_0x2e0809(0x111)]('aiPromptInput')[_0x2e0809(0x155)]['trim']();if(!config[_0x2e0809(0x12b)]){_0x141a7c[_0x2e0809(0x100)]=_0x2e0809(0x19c);return;}_0x543ca9[_0x2e0809(0x1b0)]=_0x2e0809(0x10d),_0x543ca9['classList'][_0x2e0809(0x1ca)](_0x2e0809(0x1e5)),_0x141a7c[_0x2e0809(0x100)]=_0x2e0809(0x1a7);let _0x468467=_0x2e0809(0x145),_0x14d94c='';_0x13fef2?_0x14d94c=_0x2e0809(0x177)+_0x13fef2+_0x2e0809(0x1bf):_0x14d94c=_0x2e0809(0x153);const _0x3185d5=_0x468467+'\x0a'+_0x14d94c+_0x2e0809(0x1ba);try{const _0x4249ec=await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key='+config[_0x2e0809(0x12b)],{'method':'POST','headers':{'Content-Type':'application/json'},'body':JSON[_0x2e0809(0xcd)]({'contents':[{'parts':[{'text':_0x3185d5}]}]})}),_0x27b69f=await _0x4249ec[_0x2e0809(0x186)](),_0x48608e=_0x27b69f['candidates'][0x0][_0x2e0809(0x182)][_0x2e0809(0x114)][0x0][_0x2e0809(0x1bc)],_0x1f74f6=_0x48608e[_0x2e0809(0x1b1)](/\{[\s\S]*\}/);if(_0x1f74f6){const _0x3385a1=JSON[_0x2e0809(0xdd)](_0x1f74f6[0x0]),_0x42fca7=_0x2e0809(0x1f7)+_0x3385a1['key'];if(typeof _0x3385a1[_0x2e0809(0x1c2)]===_0x2e0809(0xd4))_0x3385a1['hex']=parseInt(_0x3385a1[_0x2e0809(0x1c2)][_0x2e0809(0x17d)](/^#|0x/,''),0x10);if(typeof _0x3385a1['glow']==='string')_0x3385a1[_0x2e0809(0x194)]=parseInt(_0x3385a1[_0x2e0809(0x194)][_0x2e0809(0x17d)](/^#|0x/,''),0x10);_0x3385a1[_0x2e0809(0x1af)]=new Array(0x6)[_0x2e0809(0x1b8)](_0x3385a1['spell']),currentAttributes[_0x42fca7]=_0x3385a1,config[_0x2e0809(0x104)]=_0x42fca7,_0x141a7c[_0x2e0809(0x100)]=_0x3385a1[_0x2e0809(0x123)],updateMagicCircle();}else _0x141a7c[_0x2e0809(0x100)]=_0x2e0809(0x11e);}catch(_0x33fb3d){console[_0x2e0809(0xe6)](_0x33fb3d),_0x141a7c[_0x2e0809(0x100)]='Connection\x20to\x20Akashic\x20Records\x20failed.';}finally{_0x543ca9[_0x2e0809(0x1b0)]=_0x2e0809(0xa9),_0x543ca9[_0x2e0809(0x20d)][_0x2e0809(0x1a3)]('loading');}}function saveCurrentMagic(){const _0x1c51e8=_0x30f7bc,_0x168e15=config[_0x1c51e8(0x104)],_0x457583=currentAttributes[_0x168e15],_0x7f47a7={'id':Date[_0x1c51e8(0xff)](),'type':config['type'],'attrKey':_0x168e15,'attrData':_0x457583,'timestamp':new Date()[_0x1c51e8(0x1ab)]()};savedMagics[_0x1c51e8(0xc7)](_0x7f47a7),updateSavedList(),saveToLocalStorage();}function updateSavedList(){const _0xb423b1=_0x30f7bc,_0x232c46=document[_0xb423b1(0x111)]('savedList');_0x232c46[_0xb423b1(0x1b0)]='',document[_0xb423b1(0x111)](_0xb423b1(0x20e))[_0xb423b1(0x100)]=savedMagics[_0xb423b1(0x128)],savedMagics[_0xb423b1(0x164)]((_0x213c6c,_0x4c9f67)=>{const _0x5a06e3=_0xb423b1,_0x559e02=document[_0x5a06e3(0x203)](_0x5a06e3(0x1eb));_0x559e02[_0x5a06e3(0x108)]='saved-item';const _0x32d857=document[_0x5a06e3(0x203)]('span');_0x32d857[_0x5a06e3(0x100)]=_0x213c6c[_0x5a06e3(0x17c)][_0x5a06e3(0x103)]+'\x20('+_0x213c6c['type']+')',_0x32d857[_0x5a06e3(0x166)]=()=>loadMagic(_0x4c9f67);const _0x5c0691=document[_0x5a06e3(0x203)](_0x5a06e3(0x112));_0x5c0691[_0x5a06e3(0x108)]='del-btn',_0x5c0691[_0x5a06e3(0x1b0)]=_0x5a06e3(0x156),_0x5c0691[_0x5a06e3(0x166)]=_0x19b065=>{_0x19b065['stopPropagation'](),deleteMagic(_0x4c9f67);},_0x559e02[_0x5a06e3(0xb9)](_0x32d857),_0x559e02[_0x5a06e3(0xb9)](_0x5c0691),_0x232c46['appendChild'](_0x559e02);});}function loadMagic(_0x52325b){const _0x3c1914=_0x30f7bc,_0x26f53e=savedMagics[_0x52325b];_0x26f53e[_0x3c1914(0x110)][_0x3c1914(0x13a)]('custom_')&&(currentAttributes[_0x26f53e[_0x3c1914(0x110)]]=_0x26f53e[_0x3c1914(0x17c)],document[_0x3c1914(0x111)]('aiDescText')[_0x3c1914(0x100)]=_0x26f53e[_0x3c1914(0x17c)][_0x3c1914(0x123)]),config[_0x3c1914(0x12f)]=_0x26f53e[_0x3c1914(0x12f)],document[_0x3c1914(0x111)]('magicType')[_0x3c1914(0x155)]=_0x26f53e[_0x3c1914(0x12f)],config[_0x3c1914(0x104)]=_0x26f53e[_0x3c1914(0x110)],updateMagicCircle();}function deleteMagic(_0x2050c6){const _0x392aaf=_0x30f7bc;savedMagics[_0x392aaf(0x1f3)](_0x2050c6,0x1),updateSavedList(),saveToLocalStorage();}function saveToLocalStorage(){const _0x524782=_0x30f7bc;localStorage[_0x524782(0x17a)]('gimel_saved_magics',JSON['stringify'](savedMagics));}function loadSavedMagics(){const _0x30d79e=_0x30f7bc,_0x25da54=localStorage['getItem'](_0x30d79e(0xbc));_0x25da54&&(savedMagics=JSON[_0x30d79e(0xdd)](_0x25da54),updateSavedList());}function exportJSON(){const _0x36f205=_0x30f7bc,_0x7cc4d='data:text/json;charset=utf-8,'+encodeURIComponent(JSON[_0x36f205(0xcd)](savedMagics)),_0x115009=document['createElement']('a');_0x115009[_0x36f205(0x1c6)](_0x36f205(0x1f0),_0x7cc4d),_0x115009[_0x36f205(0x1c6)](_0x36f205(0x101),_0x36f205(0x1cd)),document[_0x36f205(0xef)]['appendChild'](_0x115009),_0x115009['click'](),_0x115009[_0x36f205(0x1a3)]();}function importJSON(_0x3739eb){const _0x5ceb1e=_0x3739eb['target']['files'][0x0];if(!_0x5ceb1e)return;const _0x11d211=new FileReader();_0x11d211['onload']=function(_0x2ddc4f){const _0x1b3612=_0xc341;try{const _0xd4172f=JSON[_0x1b3612(0xdd)](_0x2ddc4f['target'][_0x1b3612(0xbe)]);Array[_0x1b3612(0x1bd)](_0xd4172f)&&(savedMagics=_0xd4172f,updateSavedList(),saveToLocalStorage(),document[_0x1b3612(0x111)]('aiDescText')[_0x1b3612(0x100)]='Import\x20successful!');}catch(_0x265e8b){document['getElementById']('aiDescText')[_0x1b3612(0x100)]='Invalid\x20JSON\x20file.';}},_0x11d211['readAsText'](_0x5ceb1e);}document[_0x30f7bc(0x111)]('apiKeyInput')[_0x30f7bc(0x185)]('input',_0x31b441=>{const _0x16b385=_0x30f7bc,_0x5a6b7b=_0x31b441[_0x16b385(0x131)][_0x16b385(0x155)],_0x37bfd6=document['getElementById']('statusDot'),_0x443162=document[_0x16b385(0x111)](_0x16b385(0x18f)),_0x452bc2=document[_0x16b385(0x111)]('apiStatus'),_0x2faf1f=document[_0x16b385(0x111)](_0x16b385(0x13b));config[_0x16b385(0x12b)]=_0x5a6b7b,_0x5a6b7b[_0x16b385(0x128)]>0x5?(config['highPrecision']=!![],_0x37bfd6[_0x16b385(0x20d)][_0x16b385(0x1ca)](_0x16b385(0x216)),_0x452bc2[_0x16b385(0x20d)][_0x16b385(0x1ca)](_0x16b385(0x216)),_0x443162[_0x16b385(0x100)]=_0x16b385(0xb6),_0x443162[_0x16b385(0xec)][_0x16b385(0x120)]=_0x16b385(0x1b3),_0x2faf1f[_0x16b385(0x20d)][_0x16b385(0x1ca)](_0x16b385(0x14c)),updateMagicCircle()):(config[_0x16b385(0x1fe)]=![],_0x37bfd6[_0x16b385(0x20d)]['remove'](_0x16b385(0x216)),_0x452bc2[_0x16b385(0x20d)]['remove'](_0x16b385(0x216)),_0x443162[_0x16b385(0x100)]=_0x16b385(0x16b),_0x443162['style'][_0x16b385(0x120)]=_0x16b385(0xac),_0x2faf1f[_0x16b385(0x20d)][_0x16b385(0x1a3)]('visible'),updateMagicCircle());}),document[_0x30f7bc(0x111)](_0x30f7bc(0x169))['addEventListener'](_0x30f7bc(0x1fc),generateMagicWithAI),document[_0x30f7bc(0x111)]('saveCurrentBtn')[_0x30f7bc(0x185)](_0x30f7bc(0x1fc),saveCurrentMagic),document[_0x30f7bc(0x111)](_0x30f7bc(0x1d5))[_0x30f7bc(0x185)]('click',exportJSON),document['getElementById']('importBtn')[_0x30f7bc(0x185)]('click',()=>document[_0x30f7bc(0x111)]('importFile')[_0x30f7bc(0x1fc)]()),document[_0x30f7bc(0x111)]('importFile')[_0x30f7bc(0x185)](_0x30f7bc(0x1c3),importJSON),document[_0x30f7bc(0x111)](_0x30f7bc(0x170))[_0x30f7bc(0x185)](_0x30f7bc(0x1c3),_0x5eefe9=>{const _0x1b7071=_0x30f7bc;config[_0x1b7071(0xf0)]=_0x5eefe9[_0x1b7071(0x131)][_0x1b7071(0xfd)],updateMagicCircle();}),document['getElementById'](_0x30f7bc(0x1cc))[_0x30f7bc(0x185)]('change',_0x2c98a8=>{const _0x282d43=_0x30f7bc;config['enableFx']=_0x2c98a8[_0x282d43(0x131)][_0x282d43(0xfd)];}),document[_0x30f7bc(0x111)](_0x30f7bc(0x1d0))[_0x30f7bc(0x185)]('change',_0x7118b1=>{config['transparentBg']=_0x7118b1['target']['checked'];}),document[_0x30f7bc(0x111)](_0x30f7bc(0x1b9))[_0x30f7bc(0x185)](_0x30f7bc(0x1c3),_0x12c38f=>{const _0x21de6b=_0x30f7bc;config[_0x21de6b(0x12f)]=_0x12c38f[_0x21de6b(0x131)][_0x21de6b(0x155)],updateMagicCircle();}),document['querySelectorAll'](_0x30f7bc(0x13c))[_0x30f7bc(0x164)](_0x190d9d=>{const _0x4dd1e1=_0x30f7bc;_0x190d9d[_0x4dd1e1(0x185)](_0x4dd1e1(0x1fc),_0x5d3682=>{const _0x517776=_0x4dd1e1;document['querySelectorAll']('.attr-btn')[_0x517776(0x164)](_0x50af29=>_0x50af29['classList'][_0x517776(0x1a3)](_0x517776(0x12a))),_0x5d3682[_0x517776(0x131)]['classList'][_0x517776(0x1ca)]('active'),document[_0x517776(0x111)](_0x517776(0x207))[_0x517776(0x20d)]['remove']('hidden'),document['getElementById'](_0x517776(0x12c))['classList'][_0x517776(0x1ca)]('hidden'),config[_0x517776(0x104)]=_0x5d3682[_0x517776(0x131)][_0x517776(0x18e)][_0x517776(0x1f2)],lastPreset=config[_0x517776(0x104)],updateMagicCircle();});}),document[_0x30f7bc(0x111)](_0x30f7bc(0x1f5))['addEventListener'](_0x30f7bc(0x1fc),()=>{const _0x434752=_0x30f7bc;config[_0x434752(0x104)]=lastPreset,document[_0x434752(0x111)]('presetAttrContainer')[_0x434752(0x20d)][_0x434752(0x1a3)](_0x434752(0xd0)),document[_0x434752(0x111)](_0x434752(0x12c))[_0x434752(0x20d)][_0x434752(0x1ca)](_0x434752(0xd0)),document[_0x434752(0x136)]('.attr-btn')[_0x434752(0x164)](_0x1e7e2c=>{const _0x1c5b92=_0x434752;if(_0x1e7e2c[_0x1c5b92(0x18e)][_0x1c5b92(0x1f2)]===lastPreset)_0x1e7e2c[_0x1c5b92(0x20d)][_0x1c5b92(0x1ca)](_0x1c5b92(0x12a));else _0x1e7e2c[_0x1c5b92(0x20d)][_0x1c5b92(0x1a3)](_0x1c5b92(0x12a));}),updateMagicCircle();}),document[_0x30f7bc(0x111)](_0x30f7bc(0x119))['addEventListener'](_0x30f7bc(0x163),_0x46dca6=>{const _0x543dd6=_0x30f7bc;config[_0x543dd6(0x148)]=parseInt(_0x46dca6[_0x543dd6(0x131)][_0x543dd6(0x155)]),document[_0x543dd6(0x111)](_0x543dd6(0x122))[_0x543dd6(0x100)]=_0x543dd6(0x1fd)+config[_0x543dd6(0x148)],updateMagicCircle();}),document['getElementById']('speedRange')[_0x30f7bc(0x185)](_0x30f7bc(0x163),_0x5c2358=>{const _0x5b1688=_0x30f7bc;config['speed']=parseInt(_0x5c2358[_0x5b1688(0x131)][_0x5b1688(0x155)])/0x9;}),document[_0x30f7bc(0x136)](_0x30f7bc(0xf1))[_0x30f7bc(0x164)](_0x879086=>{const _0x31b583=_0x30f7bc;_0x879086[_0x31b583(0x185)](_0x31b583(0x1fc),_0x46bc4e=>{const _0x49b875=_0x31b583;document[_0x49b875(0x136)](_0x49b875(0xf1))[_0x49b875(0x164)](_0x109a11=>_0x109a11[_0x49b875(0x20d)][_0x49b875(0x1a3)](_0x49b875(0x12a)));const _0x491741=_0x46bc4e[_0x49b875(0xf5)];_0x491741[_0x49b875(0x20d)]['add'](_0x49b875(0x12a)),config[_0x49b875(0x192)]=_0x491741['dataset']['bg'],updateMagicCircle();});}),document[_0x30f7bc(0x111)](_0x30f7bc(0x20f))[_0x30f7bc(0x185)](_0x30f7bc(0x1fc),()=>{const _0x39083e=_0x30f7bc,_0x36d7ed=document[_0x39083e(0x111)](_0x39083e(0xf4)),_0x27b24f=_0x36d7ed[_0x39083e(0x1d6)],_0x34b4b9=_0x36d7ed[_0x39083e(0xaf)],_0x666fef=renderer[_0x39083e(0x174)](),_0x33245c=0x5;renderer[_0x39083e(0x1b7)](_0x666fef*_0x33245c),renderer['setSize'](_0x27b24f,_0x34b4b9),composer['setSize'](_0x27b24f*_0x33245c,_0x34b4b9*_0x33245c);const _0xb7b02c=scene[_0x39083e(0x16f)];config[_0x39083e(0xbf)]&&(scene[_0x39083e(0x16f)]=null,renderer[_0x39083e(0xf8)](0x0,0x0),renderer[_0x39083e(0x10c)]());config[_0x39083e(0xbf)]?renderer[_0x39083e(0x180)](scene,camera):composer[_0x39083e(0x180)]();const _0x55ec1f=document[_0x39083e(0x203)]('a'),_0x32906a=currentAttributes[config[_0x39083e(0x104)]][_0x39083e(0x103)],_0xbc8c4d=config[_0x39083e(0x1fe)]?_0x39083e(0x175):_0x39083e(0x20a);_0x55ec1f[_0x39083e(0x101)]='magic_'+_0x32906a+'_'+_0xbc8c4d+'_'+Date[_0x39083e(0xff)]()+_0x39083e(0xe5),_0x55ec1f[_0x39083e(0x1f0)]=renderer['domElement'][_0x39083e(0x20b)](_0x39083e(0x1c9),0x1),_0x55ec1f[_0x39083e(0x1fc)](),config[_0x39083e(0xbf)]&&(config[_0x39083e(0x192)]===_0x39083e(0x1c0)?scene[_0x39083e(0x16f)]=new THREE[(_0x39083e(0xd8))](0xffffff):scene['background']=new THREE[(_0x39083e(0xd8))](0x50505)),renderer[_0x39083e(0x1b7)](_0x666fef),renderer[_0x39083e(0xc8)](_0x27b24f,_0x34b4b9),composer[_0x39083e(0xc8)](_0x27b24f,_0x34b4b9),renderer[_0x39083e(0x10c)](),composer[_0x39083e(0x180)]();}),document[_0x30f7bc(0x136)](_0x30f7bc(0x160))[_0x30f7bc(0x164)](_0x1ab73b=>{const _0xb86080=_0x30f7bc;_0x1ab73b[_0xb86080(0x185)](_0xb86080(0x1fc),_0x714c6b=>{const _0x2e43f1=_0xb86080,_0x54735b=parseInt(_0x714c6b[_0x2e43f1(0x131)][_0x2e43f1(0x18e)][_0x2e43f1(0x1b5)]);if(isRecording)return;isRecording=!![],document[_0x2e43f1(0xef)][_0x2e43f1(0x20d)][_0x2e43f1(0x1ca)](_0x2e43f1(0x162));const _0xe74d9f=renderer['domElement'],_0x310ef0=_0xe74d9f[_0x2e43f1(0xc2)](0x3c),_0x567af9={'mimeType':_0x2e43f1(0xbd),'videoBitsPerSecond':0x2faf080};!MediaRecorder[_0x2e43f1(0x195)](_0x567af9[_0x2e43f1(0x17e)])&&(_0x567af9['mimeType']='video/webm');try{mediaRecorder=new MediaRecorder(_0x310ef0,_0x567af9);}catch(_0x4c89ae){console['error'](_0x2e43f1(0x102),_0x4c89ae),mediaRecorder=new MediaRecorder(_0x310ef0);}recordedChunks=[],mediaRecorder[_0x2e43f1(0xa8)]=_0x59ffdc=>{const _0xb5e96e=_0x2e43f1;if(_0x59ffdc[_0xb5e96e(0xd9)][_0xb5e96e(0x1d7)]>0x0)recordedChunks[_0xb5e96e(0x107)](_0x59ffdc[_0xb5e96e(0xd9)]);},mediaRecorder[_0x2e43f1(0x193)]=()=>{const _0x1f9df4=_0x2e43f1,_0x41f66a=new Blob(recordedChunks,{'type':_0x1f9df4(0xb5)}),_0x558d06=URL[_0x1f9df4(0x125)](_0x41f66a),_0xa1887c=document[_0x1f9df4(0x203)]('a');_0xa1887c[_0x1f9df4(0x1f0)]=_0x558d06,_0xa1887c['download']=_0x1f9df4(0xc6)+currentAttributes[config[_0x1f9df4(0x104)]]['name']+_0x1f9df4(0x16a),_0xa1887c['click'](),URL[_0x1f9df4(0x1ec)](_0x558d06),isRecording=![],document[_0x1f9df4(0xef)][_0x1f9df4(0x20d)][_0x1f9df4(0x1a3)](_0x1f9df4(0x162));},mediaRecorder[_0x2e43f1(0x10e)](),setTimeout(()=>{const _0x281044=_0x2e43f1;if(mediaRecorder[_0x281044(0xe2)]==='recording')mediaRecorder[_0x281044(0x1a1)]();},_0x54735b*0x3e8);});}),document[_0x30f7bc(0x111)]('reset-cam-btn')['addEventListener'](_0x30f7bc(0x1fc),()=>{const _0x318a7d=_0x30f7bc;if(magicGroup)magicGroup[_0x318a7d(0xfe)][_0x318a7d(0x12d)](0x0,0x0,0x0);camera[_0x318a7d(0x1ad)][_0x318a7d(0x12d)](0x0,0x0,0x10),camera[_0x318a7d(0x151)](0x0,0x0,0x0);}),window[_0x30f7bc(0x185)](_0x30f7bc(0xcf),()=>{const _0x7e8fc1=_0x30f7bc,_0x294817=document[_0x7e8fc1(0x111)](_0x7e8fc1(0xf4)),_0x1f27a1=_0x294817[_0x7e8fc1(0x1d6)],_0x487f08=_0x294817[_0x7e8fc1(0xaf)];camera[_0x7e8fc1(0x1c8)]=_0x1f27a1/_0x487f08,camera[_0x7e8fc1(0x113)](),renderer[_0x7e8fc1(0xc8)](_0x1f27a1,_0x487f08),composer['setSize'](_0x1f27a1,_0x487f08);}),init();
    </script>
</body>
</html>